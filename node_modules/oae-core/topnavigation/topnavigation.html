<!-- CSS -->
<link rel='stylesheet' type='text/css' href='css/topnavigation.css'/>

<div id='topnavigation_container' class='oae-centered' role='navigation' aria-label='__MSG__TOPNAV_ARIA_LABEL__'>
    <a id='topnavigation_skip' class='oae-jump-link oae-bold oae-aural-text oae-hidden' href='#topnavigation_target' accesskey='__MSG__SKIP_TOP_MENU_KEY__'>__MSG__SKIP_TOP_MENU__</a>
    <a id='lhnavigation_skip'  class='oae-jump-link oae-bold oae-aural-text oae-hidden' href='#lhnavigation_target' accesskey='__MSG__SKIP_TO_LH_MENU_KEY__'>__MSG__SKIP_TO_LH_MENU__</a>
    <div id='topnavigation_scroll_to_top_container'>
        <button type='button' class='oae-link-button' id='topnavigation_scroll_to_top' title='__MSG__SCROLL_TO_TOP__' accesskey='s' style='display:none;'></button>
    </div>
    <div id='topnavigation_left' class='oae-force-left'></div>
    <div id='topnavigation_right' class='oae-force-right'>
        <div id='topnavigation_right_content' class='oae-force-right'></div>
        <div id='topnavigation_search' class='oae-search-container oae-force-right' role='search' aria-label='__MSG__TOPNAV_SEARCH_ARIA_LABEL__'>
            <input x-webkit-speech speech type='text' id='topnavigation_search_input' title='__MSG__SEARCH_FOR__' class='oae-search-inputfield'/>
            <button type='button' class='oae-button oae-search-button' title='__MSG__SUBMIT_SEARCH__'>
                <span class='oae-search-button-icon'></span>
                <span class='oae-aural-text'>__MSG__SUBMIT_SEARCH__</span>
            </button>
            <div id='topnavigation_search_results' class='oae-hidden'>
                <div id='topnavigation_search_results_container' role='menu'><!-- --></div>
                <div id='topnavigation_search_results_bottom_container'><!-- --></div>
            </div>
        </div>
    </div>
</div>
<h2 id='topnavigation_target' class='oae-aural-text'>__MSG__SKIP_MENU_TARGET__</h2>

<!--
////////////////////
// NAVIGATION BAR // 
////////////////////
-->

<div id='topnavigation_left_loggedin_template'><!--
    <ul role='menubar'>
        <li class='oae-menu-dropdown'>
            <a href='/' class='oae-bold topnavigation-menu-item' role='menuitem' aria-haspopup='true'>__MSG__YOU__</a>
            <div class='oae-menu-dropdown-container oae-hidden'>
                <ul role='menu' aria-hidden='true' class='oae-menu-dropdown-container-content'>
                    <li><a role='menuitem' href='/me#l=home' class='oae-regular-links oae-bold'>__MSG__MY_HOME__</a></li>
                    <li><hr class='oae-split-line'/></li>
                    <li><a role='menuitem' href='/me#l=profile/basic' class='oae-regular-links oae-bold'>__MSG__MY_PROFILE__</a></li>
                    <li><a role='menuitem' href='/me#l=library' class='oae-regular-links oae-bold'>__MSG__MY_LIBRARY__</a></li>
                    <li><a role='menuitem' href='/me#l=memberships' class='oae-regular-links oae-bold'>__MSG__MY_MEMBERSHIPS__</a></li>
                </ul>
            </div>
        </li>
        <li class='oae-menu-dropdown'>
            <a href='#' class='oae-bold topnavigation-menu-item' role='menuitem' aria-haspopup='true'>__MSG__CREATE_AND_COLLECT__</a>
            <div class='oae-menu-dropdown-container oae-hidden'>
                <ul role='menu' aria-hidden='true' class='oae-menu-dropdown-container-content'>
                    <li><a role='menuitem' href='#' class='oae-regular-links oae-bold oae-trigger-addcontent'>__MSG__ADD_CONTENT__</a></li>
                    <li><a role='menuitem' href='/creategroup' class='oae-regular-links oae-bold'>__MSG__CREATE_A_GROUP__</a></li>
                </ul>
            </div>
        </li>
        <li class='oae-menu-dropdown'>
            <a href='/' class='oae-bold topnavigation-menu-item' role='menuitem' aria-haspopup='true'>__MSG__EXPLORE__</a>
            <div class='oae-menu-dropdown-container oae-hidden'>
                <ul role='menu' aria-hidden='true' class='oae-menu-dropdown-container-content'>
                    <li><a role='menuitem' href='/categories' class='oae-regular-links oae-bold'>__MSG__BROWSE_ALL_CATEGORIES__</a></li>
                    <li><hr class='oae-split-line'/></li>
                    <li><a role='menuitem' href='/search#l=content' class='oae-regular-links oae-bold'>__MSG__CONTENT__</a></li>
                    <li><a role='menuitem' href='/search#l=people' class='oae-regular-links oae-bold'>__MSG__PEOPLE__</a></li>
                    <li><a role='menuitem' href='/search#l=groups' class='oae-regular-links oae-bold'>__MSG__GROUPS__</a></li>
                </ul>
            </div>
        </li>
    </ul>
--></div>

<div id='topnavigation_left_anonymous_template'><!--
    <ul role='menubar'>
        <li class='oae-menu-dropdown'>
            <a href='/' class='oae-bold topnavigation-menu-item' role='menuitem' aria-haspopup='true'>__MSG__EXPLORE__</a>
            <div class='oae-menu-dropdown-container oae-hidden'>
                <ul role='menu' aria-hidden='true' class='oae-menu-dropdown-container-content'>
                    <li><a role='menuitem' href='/categories' class='oae-regular-links oae-bold'>__MSG__BROWSE_ALL_CATEGORIES__</a></li>
                    <li><hr class='oae-split-line'/></li>
                    <li><a role='menuitem' href='/search#l=content' class='oae-regular-links oae-bold'>__MSG__CONTENT__</a></li>
                    <li><a role='menuitem' href='/search#l=people' class='oae-regular-links oae-bold'>__MSG__PEOPLE__</a></li>
                    <li><a role='menuitem' href='/search#l=groups' class='oae-regular-links oae-bold'>__MSG__GROUPS__</a></li>
                </ul>
            </div>
        </li>
        {if oae.api.config.getValue('oae-authentication', 'local', 'allowAccountCreation')}
            <li class='oae-menu'>
                <a href='/register' class='oae-bold topnavigation-menu-item' role='menuitem' aria-haspopup='true'>__MSG__SIGN_UP__</a>
            </li>
        {/if}
    </ul>
--></div>

<div id='topnavigation_right_loggedin_template'><!--
    <ul role='menu' class='oae-force-right'>
        <li class='oae-menu-dropdown'>
            <a href='/me#' class='oae-bold oae-threedots topnavigation-menu-item' role='menuitem' aria-haspopup='true'>${oae.data.me.profile.displayName|safeUserInput}</a>
            <div class='oae-menu-dropdown-container oae-hidden'>
                <ul role='menu' aria-hidden='true' class='oae-menu-dropdown-container-content'>
                    <li><a role='menuitem' href='#' id='topnavigation_preferences_link' class='oae-regular-links oae-bold accountpreferences_trigger'>__MSG__MY_ACCOUNT__</a></li>
                    <li><a role='menuitem' href='#' id='topnavigation_logout_link' class='oae-regular-links oae-bold'>__MSG__SIGN_OUT__</a></li>
                </ul>
            </div>
        </li>
    </ul>
--></div>

<div id='topnavigation_right_anonymous_template'><!--
    {var hasLocalAuth = oae.api.config.getValue('oae-authentication', 'local', 'enabled')}
    {var hasExternalAuth = oae.api.config.getValue('oae-authentication', 'facebook', 'enabled') || 
                           oae.api.config.getValue('oae-authentication', 'twitter', 'enabled') || 
                           oae.api.config.getValue('oae-authentication', 'google', 'enabled')}
    <ul role='menu' class='oae-force-right'>
        <li class='oae-menu-dropdown'>
            <a href='#' class='oae-bold topnavigation-menu-item' role='menuitem' aria-haspopup='true'>__MSG__SIGN_IN__</a>
            <div id='topnavigation_user_options_login_fields' class='oae-menu-dropdown-container oae-hidden {if hasExternalAuth && hasLocalAuth} topnavigation-local-and-external {/if}'>
                <div id='topnavigation_user_options_login_fields_container' class='oae-menu-dropdown-container-content oae-form-field-wrapper'>
                    <div id='topnavigation_3rd_party_login_container' {if !hasExternalAuth} class='oae-hidden' {/if}>
                        {if oae.api.config.getValue('oae-authentication', 'facebook', 'enabled')}
                            <a class='btn-auth btn-facebook' href='/api/auth/facebook'>
                                __MSG__SIGN_IN_WITH_FACEBOOK__
                            </a>
                        {/if}
                        {if oae.api.config.getValue('oae-authentication', 'twitter', 'enabled')}
                            <a class='btn-auth btn-twitter' href='/api/auth/twitter'>
                                __MSG__SIGN_IN_WITH_TWITTER__
                            </a>
                        {/if}
                        {if oae.api.config.getValue('oae-authentication', 'google', 'enabled')}
                            <a class='btn-auth btn-google' href='/api/auth/google'>
                                __MSG__SIGN_IN_WITH_GOOGLE__
                            </a>
                        {/if}
                    </div>
                    <div id='topnavigation_local_login_container' {if !hasLocalAuth} class='oae-hidden' {/if}>
                        <form id='topnavigation_user_options_login_form'>
                            <label for='topnavigation_login_username' class='oae-input-label-above'>__MSG__USERNAME__</label>
                            <input type='text' maxlength='255' id='topnavigation_login_username' name='topnavigation_login_username' class='topnavigation-login-container-textfield oae-input required' />
                            <label for='topnavigation_login_password' class='oae-input-label-above'>__MSG__PASSWORD__</label>
                            <input type='password' maxlength='255' id='topnavigation_login_password' name='topnavigation_login_password' class='topnavigation-login-container-textfield oae-input required' />
                            <hr class='oae-split-line'/>
                            {if oae.api.config.getValue('oae-authentication', 'local', 'allowAccountCreation')}
                                <span class='topnavigation-sign-up-link'>__MSG__NO_ACCOUNT__
                                    <a class='oae-regular-links topnavigation-sign-up-link' href='/register'>__MSG__SIGN_UP__</a>
                                </span>
                            {/if}
                            <button type='submit' class='oae-button oae-overlay-button' id='topnavigation_user_options_login_button_login'>__MSG__SIGN_IN__</button>
                            <span id='topnavigation_user_options_login_button_signing_in' class='oae-hidden'>__MSG__SIGNING_IN__</span>
                        </form>
                    </div>
                    <div class='oae-push'/>
                </div>
            </div>
        </li>
    </ul>
--></div>

<!--
////////////
// SEARCH //
////////////
-->

<div id='search_template' style='display:none'><!--
        {if files && files.length}
            <a href='/search#l=content&q=${query}' class='topnavigation-search-results-section-header'>__MSG__CONTENT__</a>
            <ul role='menu'>
               {for file in files}
                    <li>
                        <div class='topnavigation-content-icon-container oae-force-left'>
                            <span class='oae-icon-16 topnavigation-content-icon ${file.css_class}'></span>
                        </div>
                        <a role='menuitem' href='${file.url}' title='${file.name|safeOutput}' class='oae-bold'>${file.dottedname}</a>
                    </li>
                    {if file_index != files.length -1}<hr class='oae-split-line'/>{/if}
                {/for}
            </ul>
        {/if}
        {if people && people.length}
            <a href='/search#l=people&q=${query}' class='topnavigation-search-results-section-header'>__MSG__PEOPLE__</a>
            <ul role='menu'>
                {for person in people}
                    <li>
                        <div class='topnavigation-content-icon-container oae-force-left'>
                            <span class='oae-icon-16 topnavigation-person-icon'></span>
                        </div>
                        <a role='menuitem' href='${person.url}' title='${person.name}' class='oae-bold'>${person.dottedname}</a>
                    </li>
                    {if person_index != people.length -1}<hr class='oae-split-line'/>{/if}
                {/for}
            </ul>
        {/if}
        {if groups[c.id] && groups[c.id].length}
            <a href='/search#l=${c.id}&category=${c.id}&q=${query}' class='topnavigation-search-results-section-header'>${sakai.api.i18n.getValueForKey(c.title)}</a>
            <ul role='menu'>
                {for group in groups[c.id]}
                    <li>
                        <div class='oae-force-left topnavigation-content-icon-container'>
                            <span class='oae-icon-16 ${group.css_class}'></span>
                        </div>
                        <a role='menuitem' href='${group.url}' title='${group.name|safeOutput}' class='oae-bold'>${group.dottedname}</a>
                    </li>
                    {if group_index != groups.length -1}<hr class='oae-split-line'/>{/if}
                {/for}
            </ul>
        {/if}
--></div>

<div id='search_bottom_template' style='display:none;'><!--
    {if people.length || groups.length || files.length && people.length + groups.length + files.length != peopletotal + groupstotal + filestotal}
        <a href='/search#q=${query}&filter=&facet=&page=1' id='topnavigation_search_see_all' class='oae-button oae-overlay-button'>
            __MSG__SEE_ALL__
        </a>
    {/if}
    <span id='topnavigation_search_results_bottom_content'>
        {var totalresults = 0}
        {if people.length || files.length}
            ${totalresults = peopletotal + filestotal|eat}
        {/if}
        {for c in templates}
            {if groups[c.id] && groups[c.id].length}
                ${totalresults += groups[c.id + 'total']|eat}
            {/if}
        {/for}
        {if totalresults > 0}
            ${totalresults} __MSG__RESULTS__
        {else}
            __MSG__NO_RESULTS__
        {/if}
    </span>
--></div>

<!-- JAVASCRIPT -->
<script type='text/javascript' src='js/topnavigation.js'></script>
