<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/grouppermissions.css" />

<!-- <div id="grouppermissions_container" class="oae-dialog oae-dialog-container"> -->
<div id="grouppermissions_container" class="oae-dialog oae-dialog-container">
    <div class="oae-dialog-close jqmClose"></div>
    <div id="grouppermissions_group_container"></div>
    <hr class="oae-hidden oae-push"/>
    <div class="oae-force-right grouppermissions_buttons">
        <button class="oae-link-button jqmClose oae-bold" type="button">__MSG__CANCEL__</button>
        <button type="button" class="oae-button oae-overlay-action-button" id="grouppermissions_apply_permissions">__MSG__SAVE_AND_CLOSE__</button>
    </div>
</div>

<div id="grouppermissions_warning_container" class="oae-dialog oae-dialog-container" style="display:none;">
    <div class="oae-dialog-close jqmClose"></div>
    <h1 class="oae-dialog-header">__MSG__WARNING__</h1>
    <p id="grouppermissions_warning_container_text"></p>
    <div class="oae-force-right grouppermissions_buttons">
        <button type="button" class="oae-link-button jqmClose oae-bold">__MSG__GO_BACK__</button>
        <button type="button" class="oae-button oae-overlay-action-button" id="grouppermissions_proceedandapply">__MSG__PROCEED_AND_APPLY__</button>
    </div>
    <div class="oae-push"></div>
</div>

<div id="grouppermissions_group_template"><!--
    <h1 class="oae-dialog-header">__MSG__PERMISSIONS_FOR_TITLE__</h1>
    <div class="grouppermissions_permissions_container first">
        <h2>__MSG__VISIBLE_TO__</h2>
        <div class="oae-inset-shadow-container" id="grouppermissions_see_container">
            <p>__MSG__WHO_CAN_FIND_OR_SEE_THIS__</p>

            <div class="{if defaultPermission === "public"} oae-outer-shadow-container{elseif group.visibility === "public" && !defaultPermission} oae-outer-shadow-container{else} grouppermissions_unselected_rbt{/if} grouppermissions_selectable">
                <input type="radio" name="grouppermissions_see" id="grouppermissions_see_public" {if defaultPermission === "public"}checked="checked" {elseif group.visibility === "public" && !defaultPermission} checked="checked" {/if} value="public">
                <label for="grouppermissions_see_public" class="oae-bold"><span class="label_icon oae-visibility-public"></span>__MSG__ANYONE_PUBLIC__</label>
            </div>
            <div class="{if defaultPermission === "loggedin"} oae-outer-shadow-container{elseif group.visibility === "loggedin" && !defaultPermission} oae-outer-shadow-container{else} grouppermissions_unselected_rbt{/if} grouppermissions_selectable">
                <input type="radio" name="grouppermissions_see" id="grouppermissions_see_everyone" {if defaultPermission === "loggedin"}checked="checked" {elseif group.visibility === "loggedin" && !defaultPermission} checked="checked" {/if} value="loggedin">
                <label for="grouppermissions_see_everyone" class="oae-bold"><span class="label_icon oae-visibility-loggedin"></span>__MSG__LOGGED_IN_PEOPLE_ONLY__</label>
            </div>
            <div class="{if defaultPermission === "private"} oae-outer-shadow-container{elseif group.visibility === "private" && !defaultPermission} oae-outer-shadow-container{else} grouppermissions_unselected_rbt{/if} grouppermissions_selectable">
                <input type="radio" name="grouppermissions_see" id="grouppermissions_see_private" {if defaultPermission === "private"}checked="checked" {elseif group.visibility === "private" && !defaultPermission} checked="checked" {/if} value="private">
                <label for="grouppermissions_see_private" class="oae-bold"><span class="label_icon oae-visibility-private"></span>__MSG__PRIVATE_TO_THE_SHARED_WITH_LIST__ <span class="grouppermissions_you"> (__MSG__RIGHT__)</span></label>
            </div>
        </div>
        <hr class="oae-push oae-hidden"/>
        <h2>How can they join?</h2>
        <div class="oae-inset-shadow-container" id="grouppermissions_joinable_container">
            <p>How can someone join the group?</p>

            <select>
                <option value="yes"{if group.joinable === "yes"} selected="selected"{/if}>People can automatically join</option>
                <option value="request"{if group.joinable === "request"} selected="selected"{/if}>People can request to join</option>
                <option value="no"{if group.joinable === "no"} selected="selected"{/if}>Managers add people</option>
            </select>
        </div>
        <hr class="oae-push oae-hidden"/>
    </div>

    <div class="grouppermissions_permissions_container">
        <h2>__MSG__SHARED_WITH__ </h2>
        <div class="oae-inset-shadow-container">
            <p>__MSG__WHO_CAN_EDIT_THIS__</p>
            <select id="grouppermissions_members_autosuggest_permissions">
                <option value="manager">__MSG__MANAGER__</option>
                <option value="member" selected="selected">__MSG__MEMBER__</option>
            </select>
            <input id="grouppermissions_members_autosuggest"/>
            <div id="grouppermissions_members_autosuggest_container" style="display:none;">
                <textarea id="grouppermissions_members_autosuggest_text" placeholder="__MSG__ENTER_A_MESSAGE_TO_SHARE__" title="__MSG__ENTER_A_MESSAGE_TO_SHARE__"></textarea>
                 <div class="oae-force-right">
                    <button type="button" class="oae-link-button oae-bold" id="grouppermissions_members_autosuggest_cancelbutton">__MSG__CANCEL__</button>
                    <button type="button" class="oae-button oae-header-button oae-header-small-button share_trigger_click" id="grouppermissions_members_autosuggest_sharebutton">__MSG__SHARE__</button>
                </div>
                <div class="oae-push"></div>
            </div>
            <ul id="grouppermissions_members_list" class="oae-list"></ul>
        </div>
    </div>
--></div>

<div id="grouppermissions_members_noresults_template"><!--
    <li class="oae-no-results-container">
        <div class="oae-no-results-arrow-up"></div>
        <div class="oae-no-results-icon oae-no-results-magnifier less-margin"></div>
    </li>
--></div>

<div id="grouppermissions_members_template"><!--
    {for p in results}
        {var resourceType = (oae.api.user.isUserId(p.profile.id)) ? 'user' : 'group'}
        <li class="oae-list-item" data-key="${p.profile.id}" data-id="${p.profile.id}" data-original-role="${p.role}">
            <div class="oae-list-item-banner" style="display: none;">
                <div>${p.profile.displayName|safeUserInput}</div>
            </div>
            <div class="oae-list-item-left">
                <div class="oae-list-item-left-inner">
                    <img src="/node_modules/oae-core/participants/img/user_icon.png" alt="${p.profile.displayName|safeUserInput}" class="oae-list-item-small-picture"/>
                    <a href="/${resourceType}/${p.profile.id}" class="oae-force-left oae-threedots grouppermissions_member_name" title="${p.profile.displayName|safeUserInput}">${p.profile.displayName|safeUserInput}</a>
                    <button data-sakai-entityid="${p.profile.id}" class="oae-link-button oae-action-icon oae-actions-delete" type="button" title="Remove ${p.profile.displayName|safeUserInput}"></button>
                    <select class="grouppermissions_member_permissions oae-force-right">
                        <option value="manager" {if p.role === "manager"} selected="selected"{/if}>__MSG__MANAGER__</option>
                        <option value="member" {if p.role === "member"} selected="selected"{/if}>__MSG__MEMBER__</option>
                    </select>
                </div>
            </div>
            <div class="oae-push"></div>
        </li>
    {/for}
--></div>

<div id="grouppermissions_share_message_template"><!--
 __MSG__HI__

 __MSG__I_WOULD_LIKE_TO_SHARE_FILENAME_WITH_YOU__
 __MSG__YOU_CAN_FIND_IT_ON_PATH__

 __MSG__REGARDS__,
 __MSG__USER__
--></div>

<div id="grouppermissions_warning_container_text_template"><!--
    {if visibility === "loggedin"}
        __MSG__YOU_ARE_ABOUT_TO_MAKE_THIS_GROUP_OPEN_TO_INSTITUTION__
    {else}
        __MSG__YOU_ARE_ABOUT_TO_MAKE_THIS_GROUP_OPEN_TO_PUBLIC__
    {/if}
--></div>

<div id="grouppermissions_permissionschanged" style="display:none;">__MSG__GROUP_PERMISSIONS_SUCCESSFULLY_CHANGED__</div>
<div id="grouppermissions_permissions" style="display:none;">__MSG__GROUP_PERMISSIONS__</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="javascript/grouppermissions.js"/>
