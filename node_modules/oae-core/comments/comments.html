<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/comments.css" />

<!-- CONTENT -->
<div class="comments-widget">
    <ul id="comments-container" class="media-list"><!-- --></ul>
</div>

<!-- DELETE MODAL -->
<div id="deletecomment-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="deletecomment-modal-title" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>
                <h3>__MSG__DELETE_COMMENT__</h3>
            </div>
            <div class="modal-body">
                <h4>__MSG__ARE_YOU_SURE_YOU_WANT_TO_DELETE_THIS_COMMENT__</h4>
                <div class="alert alert-danger text-center">
                    __MSG__CAUTION_THIS_ACTION_CANNOT_BE_UNDONE__
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-link pull-left" data-dismiss="modal">__MSG__CANCEL__</button>
                <button type="button" id="deletecomment-delete" class="btn btn-danger pull-right">__MSG__DELETE_COMMENT__</button>
            </div>
        </div>
    </div>
</div>

<div id="comments-new-comment-template"><!--
    <li class="media">
        <div class="comments-thumbnail">
            ${renderThumbnail(oae.data.me)}
        </div>
        <div class="media-body">
            <form class="comments-new-comment-form" role="form">
                <div class="form-group">
                    <label for="comments-new-comment" class="control-label oae-aural-text">__MSG__YOUR_COMMENT__</label>
                    <textarea id="comments-new-comment" placeholder="__MSG__YOUR_COMMENT__" class="form-control required maxlength-long"></textarea>
                </div>
                <button type="submit" class="btn pull-right" title="__MSG__COMMENT__">__MSG__COMMENT__</button>
            </form>
        </div>
    </li>
--></div>

<div id="comments-new-comment-notifications-template"><!--
    __MSG__POSTED_A_COMMENT_JUST_NOW__
--></div>

<div id="comments-comment-template"><!--
    {for comment in results}
        {var commentLevel = comment.level > 2 ? 2 : comment.level}
        <li id="${comment.threadKey}" class="media comments-level-${commentLevel} {if !comment.body} deleted{/if}" data-id="${comment.created}">
            <div class="comments-thumbnail">
                ${renderThumbnail(comment.createdBy || 'user')}
            </div>
            <div class="media-body">
                {if !comment.body}
                    <h4 class="media-heading"><small>__MSG__THIS_COMMENT_HAS_BEEN_DELETED__</small></h4>
                {else}
                    <div class="pull-right">
                        {if !oae.data.me.anon}
                            <button type="button" class="btn btn-link comments-reply-button" data-id="${comment.created}" title="__MSG__REPLY_TO_THIS_COMMENT__">
                                <span class="oae-aural-text">__MSG__REPLY_TO_THIS_COMMENT__</span>
                                <i class="icon-reply"></i>
                            </button>
                        {/if}
                        {if canManage || comment.createdBy.id === oae.data.me.id}
                            <button type="button" class="btn btn-link comments-delete-button" data-id="${comment.created}" title="__MSG__DELETE_COMMENT__">
                                <span class="oae-aural-text">__MSG__DELETE_COMMENT__</span>
                                <i class="icon-trash"></i>
                            </button>
                        {/if}
                    </div>
                    <h4 class="media-heading">
                        {if comment.createdBy.profilePath}
                            <a href="${comment.createdBy.profilePath}">
                                ${comment.createdBy.displayName|encodeForHTML}
                            </a>
                        {else}
                            ${comment.createdBy.displayName|encodeForHTML}
                        {/if}
                        <small class="muted">${oae.api.l10n.timeAgo(comment.created)}</small>
                    </h4>
                    ${oae.api.util.security().encodeForHTMLWithLinks(comment.body).replace(/\n/g, '<br/>')}

                    <div class="media hide comments-reply-container">
                        <div class="comments-thumbnail">
                            ${renderThumbnail(oae.data.me)}
                        </div>
                        <div class="media-body">
                            <form class="comments-new-reply-form" data-replyTo="${comment.created}">
                                <div class="control-group">
                                    <div class="controls">
                                        <label for="comments-new-reply-${comment.created}" class="oae-aural-text">__MSG__YOUR_COMMENT__</label>
                                        <textarea id="comments-new-reply-${comment.created}" placeholder="__MSG__YOUR_COMMENT__" class="required maxlength-long"></textarea>
                                    </div>
                                </div>
                                <button type="submit" class="btn pull-right">__MSG__REPLY__</button>
                            </form>
                        </div>
                    </div>
                {/if}
            </div>
        </li>
    {/for}
--></div>

<div id="comment-notification-title-template"><!--
    {if type === 'comment'}
        __MSG__COMMENT_NOT_ADDED__
    {else}
        __MSG__REPLY_NOT_ADDED__
    {/if}
--></div>

<div id="comment-notification-body-template"><!--
    {if type === 'comment'}
        __MSG__COMMENT_ADDED_FAIL__
    {else}
        __MSG__REPLY_ADDED_FAIL__
    {/if}
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/comments.js"></script>
