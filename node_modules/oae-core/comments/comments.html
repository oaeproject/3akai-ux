<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/comments.css" />

<!-- CONTENT -->
<div class="comments-widget">
    <ul id="comments-container" class="media-list"><!-- --></ul>
</div>

<div id="comments-new-comment-template"><!--
    <li class="media">
        <div class="comments-thumbnail">
            ${renderThumbnail(oae.data.me)}
        </div>
        <div class="media-body">
            <form class="comments-new-comment-form">
                <div class="control-group">
                    <div class="controls">
                        <label for="comments-new-comment" class="oae-aural-text">__MSG__YOUR_COMMENT__</label>
                        <textarea id="comments-new-comment" placeholder="__MSG__YOUR_COMMENT__" class="required maxlength-long"></textarea>
                    </div>
                </div>
                <button type="submit" class="btn pull-right" title="__MSG__COMMENT__">__MSG__COMMENT__</button>
            </form>
        </div>
    </li>
--></div>

<div id="comments-comment-template"><!--
    {for comment in results}
        {var commentLevel = comment.level > 2 ? 2 : comment.level}
        <li class="media comments-level-${commentLevel} {if !comment.body} deleted{/if}" data-id="${comment.created}">
            <div class="comments-thumbnail">
                ${renderThumbnail(comment.createdBy || 'user')}
            </div>
            <div class="media-body">
                {if !comment.body}
                    <h4 class="media-heading"><small>__MSG__THIS_COMMENT_HAS_BEEN_DELETED__</small></h4>
                {else}
                    <div class="pull-right">
                        {if !oae.data.me.anon}
                            <button type="button" class="btn btn-link comments-reply-button" data-id="${comment.created}" title="__MSG__REPLY_TO_THIS_COMMENT__">
                                <span class="oae-aural-text">__MSG__REPLY_TO_THIS_COMMENT__</span>
                                <i class="icon-reply"></i>
                            </button>
                        {/if}
                        {if canManage || comment.createdBy.id === oae.data.me.id}
                            <button type="button" class="btn btn-link comments-delete-button" data-id="${comment.created}" title="__MSG__DELETE_COMMENT__">
                                <span class="oae-aural-text">__MSG__DELETE_COMMENT__</span>
                                <i class="icon-trash"></i>
                            </button>
                        {/if}
                    </div>
                    <h4 class="media-heading">
                        <a href="${comment.createdBy.profilePath}">
                            ${comment.createdBy.displayName|encodeForHTML}
                        </a>
                        <small>${oae.api.l10n.timeAgo(comment.created)}</small>
                    </h4>
                    ${oae.api.util.security().encodeForHTML(comment.body).replace(/\n/g, '<br/>')}

                    <div class="media hide comments-reply-container">
                        <div class="comments-thumbnail">
                            ${renderThumbnail(oae.data.me)}
                        </div>
                        <div class="media-body"></div>
                    </div>
                {/if}
            </div>
        </li>
    {/for}
--></div>

<div id="comments-reply-template"><!--
    <form class="comments-new-reply-form" data-replyTo="${created}">
        <div class="control-group">
            <div class="controls">
                <label for="comments-new-reply-${created}" class="oae-aural-text">__MSG__YOUR_COMMENT__</label>
                <textarea id="comments-new-reply-${created}" placeholder="__MSG__YOUR_COMMENT__" class="required maxlength-long"></textarea>
            </div>
        </div>
        <button type="submit" class="btn pull-right" title="__MSG__REPLY__">__MSG__REPLY__</button>
    </form>
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/comments.js"></script>
