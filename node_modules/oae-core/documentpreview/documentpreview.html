<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/documentpreview.css" />
<link rel="stylesheet" type="text/css" href="/shared/vendor/css/annotator.css" />

<!-- CONTENT -->

<div id="documentpreview-widget">
    <div id="documentpreview-container">
        <!-- TOOLBAR -->
        <div id="documentpreview-toolbar" class="clearfix row">
            <!-- ZOOM IN / OUT -->
            <div class="col-xs-3">
                <button type="button" id="documentpreview-zoom-in" class="btn btn-link" title="__MSG__ZOOM_IN__">
                    <i class="fa fa-search-plus"><span class="sr-only">__MSG__ZOOM_IN__</span></i>
                </button>
                <button type="button" id="documentpreview-zoom-out" class="btn btn-link" title="__MSG__ZOOM_OUT__">
                    <i class="fa fa-search-minus"><span class="sr-only">__MSG__ZOOM_OUT__</span></i>
                </button>
            </div>
            <!-- PAGE NAVIGATION -->
            <div class="col-xs-6 text-center">
                <form id="documentpreview-page-controls" role="form">
                    <button type="button" id="documentpreview-page-prev" class="btn btn-link" title="__MSG__PREV_PAGE__">
                        <i class="fa fa-caret-left">
                            <span class="sr-only">__MSG__PREV_PAGE__</span>
                        </i>
                    </button>
                    __MSG__PAGE_X_OF_Y_PREFIX__
                    <input id="documentpreview-page-num" aria-label="__MSG__PAGE_NUMBER__" class="form-control text-center" type="text">
                    __MSG__PAGE_X_OF_Y_MIDDLE__
                    <span id="documentpreview-page-count"><!-- --></span>
                    __MSG__PAGE_X_OF_Y_SUFFIX__
                    <button type="button" id="documentpreview-page-next" class="btn btn-link" title="__MSG__NEXT_PAGE__">
                        <i class="fa fa-caret-right">
                            <span class="sr-only">__MSG__NEXT_PAGE__</span>
                        </i>
                    </button>
                </form>
            </div>
            <!-- FULL SCREEN -->
            <div class="col-xs-3 text-right">
                <button type="button" id="documentpreview-toggle-annotator" class="hide btn btn-link" title="__MSG__ADD_ANNOTATIONS__">
                    <i class="fa fa-edit"><div id="documentpreview-annotator-status"></div><span class="sr-only">__MSG__ADD_ANNOTATIONS__</span></i>
                </button>
                <button type="button" id="documentpreview-full-screen" class="hide btn btn-link" title="__MSG__TOGGLE_FULL_SCREEN__">
                    <i class="fa fa-expand"><span class="sr-only">__MSG__TOGGLE_FULL_SCREEN__</span></i>
                </button>
            </div>
        </div>

        <div class="progress hide">
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
                <span class="sr-only">0%</span>
            </div>
        </div>

        <!-- DOCUMENT PAGES -->
        <div id="documentpreview-content" class="clearfix">
            <div id="documentpreview-sidebar" class="hide pull-right"><!-- --></div>
            <div id="documentpreview-content-container" class="pull-left">
                <div id="documentpreview-content-spacer"><!-- --></div>
            </div>
        </div>
    </div>
</div>

<!-- TEMPLATES -->
<div id="documentpreview-content-page-template"><!--
    <div class="documentpreview-content-page ${cssScopeClass}" data-page-number="${pageNumber}">
        <div class="documentpreview-content-page-loading text-center">
            <i class="fa fa-spinner fa-spin"><span class="sr-only">__MSG__LOADING__</span></i>
        </div>
    </div>
--></div>

<div id="documentpreview-sidebar-view-template"><!--
    <button type="button" id="documentpreview-annotator-close" class="close">&#215;</button>

    <div id="documentpreview-annotator-instruction" class="alert alert-info {if annotations && annotations.length} hide{/if}">__MSG__CREATE_ANNOTATIONS_BY_SELECTING_TEXT__</div>


    <div id="documentpreview-annotator-container">
        <div class="documentpreview-new-annotation-container hide"></div>

        {if annotations && annotations.length}
            <ul class="oae-list oae-list-details documentpreview-annotations-list">
                {for annotation in annotations}
                    <li class="clearfix" data-id="${annotation.id}">
                        <div class="oae-list-details-item">
                            <div class="oae-listitem">
                                <div class="oae-listitem-primary-thumbnail">
                                    ${renderThumbnail(annotation.createdBy)}
                                </div>
                                <div class="oae-listitem-metadata">
                                    <h3 class="oae-threedots">
                                        {if annotation.createdBy.profilePath}
                                            <a href="${annotation.createdBy.profilePath|profilePath}" title="${annotation.createdBy.displayName|encodeForHTMLAttribute}">${annotation.createdBy.displayName|encodeForHTML}</a>
                                        {else}
                                            ${annotation.createdBy.displayName|encodeForHTML}
                                        {/if}
                                    </h3>
                                    <small class="muted"><time datetime="${annotation.created}"></time></small>
                                </div>
                            </div>
                        </div>

                        <div class="documentpreview-annotation-container">
                            <p class="documentpreview-annotation-text">${oae.api.util.security().encodeForHTMLWithLinks(annotation.text).replace(/\n/g, '<br/>')}</p>
                            <div class="documentpreview-annotation-edit-container hide"></div>
                        </div>

                        {if !userProfile.anon}
                            <div class="documentpreview-annotation-actions">
                                {if contentProfile.isManager || (annotation.createdBy.id === oae.data.me.id && contentProfile.isViewer)}
                                    <button type="button" class="btn btn-link pull-right oae-trigger-deleteannotation" title="__MSG__DELETE_ANNOTATION__">
                                        <span class="sr-only">__MSG__DELETE_ANNOTATION__</span>
                                        <i class="fa fa-trash-o"></i>
                                    </button>
                                {/if}

                                {if contentProfile.isManager || (annotation.createdBy.id === oae.data.me.id && contentProfile.isViewer)}
                                    <button type="button" class="btn btn-link documentpreview-annotation-edit" title="__MSG__EDIT_ANNOTATION__">
                                        <span class="sr-only">__MSG__EDIT_ANNOTATION__</span>
                                        <i class="fa fa-pencil"></i>
                                    </button>
                                {/if}
                            </div>
                        {/if}
                    </li>
                {/for}
            </ul>
        {/if}
    </div>

    {if !userProfile.anon}
        <button id="documentpreview-annotator-comment" class="btn btn-xs">__MSG__ADD_COMMENT__</button>
    {/if}
--></div>

<div id="documentpreview-new-annotation-notifications-template"><!--
    __MSG__CREATED_AN_ANNOTATION_JUST_NOW__
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/documentpreview.js"></script>
