<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/revisions.css" />


<!-- MODAL -->
<div id="revisions-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="revisions-modal-title" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>
                <h3 id="revisions-modal-title">__MSG__REVISION_HISTORY__</h3>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div id="revisions-preview" class="col-xs-12 col-sm-12 col-md-8"><!-- --></div>
                    <div id="revisions-list-container" class="col-xs-12 col-sm-12 col-md-4 well">
                        <ul id="revisions-list" class="oae-list"><!-- --></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="revisions-preview-template"><!--
    {if revision.resourceSubType === 'collabdoc'}
        <div id="revisions-etherpad-container">
            {if revision.etherpadHtml}
                ${revision.etherpadHtml}
            {else}
                <div class="alert alert-warning">
                    <span>__MSG__NO_CONTENT_DESCRIPTION__</span>
                </div>
            {/if}
        </div>
    {elseif revision.mediumUrl}
        <div id="revisions-image-container" class="text-center">
            <img src="${revision.mediumUrl}" alt="__MSG__REVISION_PREVIEW__"/>
        </div>
    {else}
        <div id="revisions-default-container" class="text-center">
            <div id="revisions-default" class="text-center">
                ${renderThumbnail(revision, false, true, false)}
                <h5>__MSG__NO_PREVIEW__</h5>
            </div>
        </div>
    {/if}
--></div>

<div id="revisions-list-template"><!--
    {for revision in results}
        {var preview = ''}
        {if revision.mediumUrl}
            {var preview = revision.mediumUrl}
        {elseif resourceSubType === 'file' && revision.mime.indexOf('image/') === 0}
            {var preview = '/api/content/' + revision.contentId + '/download/' + revision.revisionId}
        {/if}
        <li class="well" tabindex="0" data-revisionid="${revision.revisionId}" data-mediumurl="${preview}">
            <div>
                <strong>${oae.api.l10n.transformDateTime(revision.created)}</strong>
            </div>
            <span>${revision.createdBy.displayName|encodeForHTML}</span>
            <div class="revisions-list-actions hide">
                {if resourceSubType !== 'file' || (revision_index !== '0' && resourceSubType === 'file')}
                    <button type="button" class="revisions-list-actions-restore btn btn-sm">
                        <i class="icon-undo"></i> __MSG__RESTORE__
                    </button>
                {/if}
                {if resourceSubType === 'file'}
                    <a href="/api/content/${revision.contentId}/download/${revision.revisionId}" class="revisions-list-actions-download btn btn-sm">
                        <i class="icon-download"></i> __MSG__DOWNLOAD__
                    </a>
                {/if}
            </div>
        </li>
    {/for}
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/revisions.js"></script>
