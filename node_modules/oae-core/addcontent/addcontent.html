<!-- CSS -->
<link  rel="stylesheet" type="text/css" href="css/addcontent.css" />

<!-- CONTAINER -->
<div id="addcontent_container" class="oae-dialog oae-dialog-container">
    <div class="oae-dialog-close jqmClose"></div>
    <h1 class="oae-dialog-header">__MSG__ADD_CONTENT__</h1>

    <ul id="addcontent_container_lhchoice">
        <li class="addcontent_container_lhchoice_item addcontent_container_lhchoice_selected_item" id="addcontent_upload_content">
            <span id="addcontent_upload_content_icon" class="lhchoice_icon"></span>
            <a href="#" class="oae-bold">__MSG__UPLOAD_CONTENT__</a>
        </li>
        <li class="addcontent_container_lhchoice_item" id="addcontent_new_document">
            <span id="addcontent_add_new_document_icon" class="lhchoice_icon"></span>
            <a href="#" class="oae-bold">__MSG__NEW_DOCUMENT__</a>
        </li>
        <li class="addcontent_container_lhchoice_item">
            <span id="addcontent_add_existing_content_icon" class="lhchoice_icon"></span>
            <span class="oae-bold">__MSG__EXISTING_CONTENT__</span>
            <ul>
                <li class="addcontent_container_lhchoice_subitem addcontent_container_lhchoice_selected_subitem" id="addcontent_existing_content_everything">
                    <span id="addcontent_everything_icon" class="lhchoice_icon"></span>
                    <a href="#">__MSG__EVERYTHING__</a>
                </li>
                <li class="addcontent_container_lhchoice_subitem" id="addcontent_existing_content_my_library">
                    <span id="addcontent_my_library_icon" class="lhchoice_icon"></span>
                    <a href="#">__MSG__MY_LIBRARY__</a>
                </li>
            </ul>
        </li>
        <li class="addcontent_container_lhchoice_item" id="addcontent_add_link">
            <span id="addcontent_add_link_icon" class="lhchoice_icon"></span>
            <a href="#" class="oae-bold">__MSG__ADD_LINK__</a>
        </li>
    </ul>

    <div id="addcontent_container_newitem">
        <div id="addcontent_container_newitem_fields">

            <div id="addcontent_upload_content_template" class="addcontent_newitem_container" style="display:none;">
                <label for="addcontent_file_upload" class="oae-force-left" id="addcontent_upload_a_file_label">__MSG__UPLOAD_A_FILE__</label>
                <form id="addcontent_upload_content_form" class="addcontent_form" method="POST" enctype="multipart/form-data">
                    <span class="addcontent_fileinput_button oae-overlay-button oae-button oae-force-left">
                        <span>__MSG__BROWSE__</span>
                        <input type="file" id="addcontent_file_upload" name="files[]" size="38"/>
                    </span>
                </form>
                <div id="addcontent_upload_content_fields" class="addcontent_form oae-push">
                    <span class="addcontent_upload_content_originaltitle"><!----></span>
                    <label for="addcontent_upload_content_title">__MSG__TITLE__</label>
                    <input placeholder="__MSG__TITLE__" type="text" id="addcontent_upload_content_title"/>

                    <label for="addcontent_upload_content_description">__MSG__DESCRIPTION__</label>
                    <textarea placeholder="__MSG__DESCRIPTION_HELPS_FINDABILITY__" id="addcontent_upload_content_description"></textarea>

                    <div class="autosuggest_wrapper">
                        <label for="addcontent_upload_content_tags">__MSG__TAGS_AND_CATEGORIES__</label>
                        <button type="button" class="oae-link-button oae-bold list_categories">__MSG__LIST_CATEGORIES__</button>
                        <input type="text" id="addcontent_upload_content_tags"/>
                    </div>

                    <label for="addcontent_upload_content_permissions">__MSG__WHO_CAN_SEE_IT__</label>
                    <select id="addcontent_upload_content_permissions">
                        <option value="public">__MSG__PUBLIC__</option>
                        <option value="everyone">__MSG__LOGGED_IN_USERS__</option>
                        <option value="private">__MSG__PRIVATE_TO_LIBRARY__</option>
                    </select>

                    <div id="addcontent_upload_content_copyright_container"></div>
                    <button type="button" class="oae-button oae-header-button addcontent_container_newitem_add_to_list addcontent_container_newitem_add_to_list_upload_new_content" disabled="disabled">__MSG__ADD__</button>
                </div>
            </div>

            <div id="addcontent_add_document_template" class="addcontent_newitem_container" style="display:none;">
                <div id="addcontent_add_document_description_container">
                    <div id="addcontent_add_document_description_image"></div>
                    <div>__MSG__SAKAI_DOC_DESCRIPTION__</div>
                </div>

                <form id="addcontent_add_document_form" class="addcontent_form">
                    <div class="oae-form-field-wrapper">
                        <label for="addcontent_add_document_title" class="oae-input-label oae-input-label-above">__MSG__NAME_DOCUMENT__</label>
                        <input type="text" id="addcontent_add_document_title" name="addcontent_add_document_title" class="required"/>

                        <label for="addcontent_add_document_description" class="oae-input-label oae-input-label-above">__MSG__DESCRIPTION__</label>
                        <textarea id="addcontent_add_document_description" placeholder="__MSG__ENTER_A_DESCRIPTION__"></textarea>

                        <div class="autosuggest_wrapper">
                            <label for="addcontent_add_document_tags" class="oae-input-label oae-input-label-above">__MSG__TAGS_AND_CATEGORIES__</label>
                            <button type="button" class="oae-link-button oae-bold list_categories">__MSG__LIST_CATEGORIES__</button>
                            <input type="text" id="addcontent_add_document_tags"/>
                        </div>

                        <label for="addcontent_add_document_permissions" class="oae-input-label oae-input-label-above">__MSG__WHO_CAN_SEE_IT__</label>
                        <select id="addcontent_add_document_permissions">
                            <option value="public">__MSG__PUBLIC__</option>
                            <option value="everyone">__MSG__LOGGED_IN_USERS__</option>
                            <option value="private">__MSG__PRIVATE_TO_LIBRARY__</option>
                        </select>
                    </div>
                    <button type="button" class="oae-button oae-header-button addcontent_container_newitem_add_to_list" disabled="disabled">__MSG__ADD__</button>
                </form>
            </div>

            <div id="addcontent_add_existing_template" class="addcontent_newitem_container" style="display:none;">
                <div class="oae-search-container">
                    <input type="text" maxlength="255" title="__MSG__SEARCH_THROUGH_EXISTING_CONTENT__" class="oae-search-inputfield addcontent_existingitems_search" placeholder="__MSG__SEARCH_THROUGH_EXISTING_CONTENT__"/>
                    <button type="button" class="oae-button oae-overlay-button oae-search-button" id="addcontent_existing_search_button">
                        <img src="/dev/img/search_icon.png" alt="__MSG__SEARCH_THROUGH_EXISTING_CONTENT__"/>
                    </button>
                </div>
                <form id="addcontent_existing_content_form" class="addcontent_form">
                    <div id="addcontent_existingitems_list_container">
                        <div id="addcontent_existingitems_list_container_actions">
                            <div class="oae-force-left">
                                <input type="checkbox" id="addcontent_existingitems_list_container_actions_checkall" class="oae-force-left"/>
                                <label for="addcontent_existingitems_list_container_actions_checkall" id="addcontent_existingitems_list_container_actions_checkall_label" class="oae-aural-text">__MSG__SELECT_ALL__</label>
                            </div>
                            <div class="oae-force-right">
                                <select id="addcontent_existingitems_list_container_actions_sort" class="oae-force-right">
                                    <option data-sort-order="desc" data-sort-on="_lastModified">__MSG__CHANGED_RECENTLY__</option>
                                    <option data-sort-order="asc" data-sort-on="filename">__MSG__A_Z__</option>
                                    <option data-sort-order="desc" data-sort-on="filename">__MSG__Z_A__</option>
                                </select>
                                <label for="addcontent_existingitems_list_container_actions_sort" id="addcontent_existingitems_list_container_actions_sort_label" class="oae-force-right">__MSG__SORT_BY__</label>
                            </div>
                        </div>
                        <div id="addcontent_existingitems_list_container_list"><!-- --></div>
                    </div>
                    <div id="addcontent_existingitems_paging" class="jq_pager"><!-- --></div>
                    <button type="button" class="oae-button oae-header-button addcontent_container_newitem_add_to_list" disabled="disabled">__MSG__ADD__</button>
                </form>
            </div>

            <div id="addcontent_add_link_template" class="addcontent_newitem_container" style="display:none;">
                <form id="addcontent_add_link_form" class="addcontent_form oae-form-field-wrapper">
                    <label for="addcontent_add_link_url" class="oae-input-label oae-input-label-above">__MSG__PASTE_LINK_URL_ADDRESS__</label>
                    <input type="text" id="addcontent_add_link_url" name="addcontent_add_link_url" class="appendhttp url required"/>

                    <label for="addcontent_add_link_title" class="oae-input-label oae-input-label-above">__MSG__TITLE__</label>
                    <input type="text" id="addcontent_add_link_title"/>

                    <label for="addcontent_add_link_description" class="oae-input-label oae-input-label-above">__MSG__DESCRIPTION__</label>
                    <textarea id="addcontent_add_link_description" placeholder="__MSG__ENTER_A_DESCRIPTION__"></textarea>

                    <div class="autosuggest_wrapper">
                        <label for="addcontent_add_link_tags" class="oae-input-label oae-input-label-above">__MSG__TAGS_AND_CATEGORIES__</label>
                        <button type="button" class="oae-link-button oae-bold list_categories">__MSG__LIST_CATEGORIES__</button>
                        <input type="text" id="addcontent_add_link_tags"/>
                    </div>
                </form>
                <button type="button" class="oae-button oae-header-button addcontent_container_newitem_add_to_list" disabled="disabled">__MSG__ADD__</button>
            </div>

        </div>
        <button type="button" id="addcontent_container_newitem_raquo_right" class="oae-button addcontent_container_newitem_add_to_list" disabled="disabled" title="__MSG__ADD__"></button>
    </div>

    <div id="addcontent_container_selecteditems">
        <h2 id="addcontent_container_selecteditems_header" class="oae-bold">__MSG__COLLECTED_ITEMS__</h2>
        <div id="addcontent_container_selecteditems_container"><!-- --></div>
    </div>

    <div id="addcontent_container_actions">
        <button type="button" class="oae-link-button jqmClose oae-bold">__MSG__CANCEL__</button>
        <button type="button" class="oae-button oae-overlay-action-button addcontent_container_start_upload" disabled="disabled">__MSG__DONE_ADD_COLLECTED__</button>
    </div>

    <div id="addcontent_selecteditems_edit_data_container" style="display:none;"><!----></div>
    <div id="addcontent_selecteditems_edit_permissions_container" style="display:none;"><!----></div>
</div>

<div id="addcontent_copyright_template"><!--
    <label for="addcontent_upload_content_copyright">__MSG__COPYRIGHT_COLON__</label>
    <select id="addcontent_upload_content_copyright">
    {for cr in copyright.types}
        <option value="${cr_index}"{if cr_index === copyright_default}selected="selected"{/if}>${sakai.api.i18n.getValueForKey(cr.title, "addcontent")}</option>
    {/for}
--></div>

<div id="addcontent_selecteditems_edit_data_template" style="display:none;"><!--
    <span style="display:none" id="${i}" class="addcontent_selecteditems_edit_index"></span>
    <div id="addcontent_selecteditems_edit_data_fields">
        <div class="addcontent_selecteditems_edit_data_close"></div>
        <form class="addcontent_form oae-form-field-wrapper" id="addcontent_selecteditems_edit_data_form">
            <label for="addcontent_selecteditems_edit_data_title">__MSG__TITLE__</label>
            <input type="text" id="addcontent_selecteditems_edit_data_title" value="${item["name"]|safeOutput}" class="required"/>
            <label for="addcontent_selecteditems_edit_data_description">__MSG__DESCRIPTION__</label>
            <textarea id="addcontent_selecteditems_edit_data_description" placeholder="__MSG__EDIT_DESCRIPTION__">${item["description"]|safeOutput}</textarea>
            <div class="autosuggest_wrapper">
                <label for="addcontent_selecteditems_edit_data_tags">__MSG__TAGS_AND_CATEGORIES__</label>
                <button type="button" class="oae-link-button oae-bold list_categories">__MSG__LIST_CATEGORIES__</button>
                <input type="text" id="addcontent_selecteditems_edit_data_tags"/>
            </div>
        </form>
    </div>
    <div id="addcontent_selecteditems_edit_data_actions">
        <button type="button" class="oae-button oae-header-button addcontent_container_newitem_save_changes">__MSG__SAVE__</button>
    </div>
--></div>

<div id="addcontent_selecteditems_edit_permissions_template" style="display:none;"><!--
    <span style="display:none" id="${i}" class="addcontent_selecteditems_edit_index"></span>
    <div id="addcontent_selecteditems_edit_data_fields">
        <div class="addcontent_selecteditems_edit_data_close"></div>
        <form class="addcontent_form">
            <label for="addcontent_selecteditems_edit_permissions_permissions">__MSG__WHO_CAN_SEE_IT__</label>
            <select id="addcontent_selecteditems_edit_permissions_permissions">
                <option value="public" {if item["visibility"] === "public"} selected="selected"{/if}>__MSG__PUBLIC__</option>
                <option value="everyone" {if item["visibility"] === "everyone"} selected="selected"{/if}>__MSG__LOGGED_IN_USERS__</option>
                <option value="private" {if item["visibility"] === "private"} selected="selected"{/if}>__MSG__PRIVATE_TO_LIBRARY__</option>
            </select>
            <label for="addcontent_selecteditems_edit_permissions_copyright">__MSG__COPYRIGHT_COLON__</label>
            <select id="addcontent_selecteditems_edit_permissions_copyright">
            {for cr in copyright.types}
                <option value="${cr_index}" {if item["copyright"] === cr_index} selected="selected"{/if}>${sakai.api.i18n.getValueForKey(cr.title, "addcontent")}</option>
            {/for}
            </select>
        </form>
    </div>
    <div id="addcontent_selecteditems_edit_permissions_actions">
        <button type="button" id="" class="oae-button oae-header-button addcontent_container_newitem_save_changes">__MSG__SAVE__</button>
    </div>
--></div>

<div id="addcontent_selecteditems_template" style="display:none;"><!--
    {macro listContent(item)}
        <li id="addcontent_selecteditems_${item_index}">
            <a href="#" class="addcontent_selecteditems_remove" title="__MSG__REMOVE__ ${item["name"]}"></a>
            <div class="${item.css_class} addcontent_selecteditems_icon"></div>
            {if item.type !== "existing"}
                <span class="addcontent_selecteditems_title">${sakai.api.Util.applyThreeDots(item["name"], 100)}</span>
                <span class="addcontent_selecteditems_actions">
                    <button type="button" class="oae-link-button oae-bold addcontent_selecteditems_actions_edit">__MSG__EDIT_DETAILS__</button>
                    <span class="addcontent_selecteditems_split">|</span>
                    <button type="button" class="oae-link-button oae-bold addcontent_selecteditems_actions_permissions">__MSG__ADD_PERMISSIONS__</button>
                </span>
            {else}
                {if $.inArray(currentSelectedLibrary, item["sakai:pooled-content-viewer"]) !== -1 || $.inArray(currentSelectedLibrary, item["sakai:pooled-content-manager"]) !== -1}
                    <span class="addcontent_selecteditems_title addcontent_selecteditems_title_gotit">${sakai.api.Util.applyThreeDots(item["name"], 100)} (__MSG__GOT_IT__)</span>
                {elseif sakai.api.Content.Collections.isCollection(item) && (sakai.api.Content.Collections.getCollectionGroupId(item) === currentSelectedLibrary || sakai.api.Content.Collections.isCollectionInMyLibrary(item))}
                    <span class="addcontent_selecteditems_title addcontent_selecteditems_title_gotit">${sakai.api.Util.applyThreeDots(item["name"], 100)} (__MSG__GOT_IT__)</span>
                {elseif item.canshare === 'false' && currentSelectedLibrary !== me.userid}
                    <span class="addcontent_selecteditems_title addcontent_selecteditems_title_gotit">${sakai.api.Util.applyThreeDots(item["name"], 100)} (__MSG__SHARING_DISABLED__)</span>
                {else}
                    <span class="addcontent_selecteditems_title">${sakai.api.Util.applyThreeDots(item["name"], 100)}</span>
                {/if}
            {/if}
        </li>
    {/macro}

    {if items.length || append}
        {if append}
            {for item in items}
                ${listContent(item)}
            {/for}
        {else}
            <div id="addcontent_saveto_container">
                <label for="addcontent_saveto">__MSG__SAVE_ALL_TO__</label>
                <select id="addcontent_saveto">
                    <option value="${me.userid}">__MSG__MY_LIBRARY__</option>
                    {for g in groups.entry}
                        {if sakai.api.Content.Collections.isCollection(g)}
                            <option value="${g["sakai:group-id"]}" {if g["sakai:group-id"] == currentSelectedLibrary} selected="selected"{/if}>${g["sakai:group-title"]|safeOutput}</option>
                        {else}
                            <option value="${g["sakai:group-id"]}" {if g["sakai:group-id"] == currentSelectedLibrary} selected="selected"{/if}>${g["sakai:group-title"]|safeOutput}'s Library</option>
                        {/if}
                    {/for}
                </select>
            </div>
            <ul>
                {for item in items}
                    ${listContent(item)}
                {/for}
            </ul>
        {/if}
    {else}
        <span class="addcontent_noselecteditems">__MSG__YOU_HAVENT_COLLECTED_ANY_CONTENT_YET__</span>
        <span class="addcontent_noselecteditems">__MSG__ADD_VARIOUS_CONTENT_HERE__</span>
    {/if}
--></div>

<div id="addcontent_existingitems_template" style="display:none;"><!--
        <ul>
            {if data.results.length}
                {for item in data.results}
                    <li {if item_index == data.results.length -1} id="addcontent_existingitems_list_lastitem"{/if} {if $.inArray(item["_path"], queue) >= 0} class="addcontent_existingitems_list_container_disabled_list_item"{/if}>
                        {var canShare = sakai.api.Content.canCurrentUserShareContent(item)}
                        <input type="checkbox" class="addcontent_existingitems_select_checkbox" id="${item["_path"]}" {if $.inArray(item["_path"], queue) >= 0} checked="checked"{/if} {if $.inArray(item["_path"], queue) >= 0} disabled{/if} {if item["sakai:pooled-content-manager"]}data-sakai-pooled-content-manager="${item["sakai:pooled-content-manager"].join(",")}"{/if} {if item["sakai:pooled-content-viewer"]}data-sakai-pooled-content-viewer="${item["sakai:pooled-content-viewer"].join(",")}"{/if} data-mimeType="${item["_mimeType"]}" data-canshare="${canShare}"/>
                        <label for="${item["_path"]}">
                            <span id="{if sakai.config.MimeTypes[item["_mimeType"]]}${sakai.config.MimeTypes[item["_mimeType"]].cssClass}{else}${sakai.config.MimeTypes["other"].cssClass}{/if}" class="{if sakai.config.MimeTypes[item["_mimeType"]]} ${sakai.config.MimeTypes[item["_mimeType"]].cssClass}{else} ${sakai.config.MimeTypes["other"].cssClass}{/if} addcontent_existingitems_list_container_list_item_icon"></span>
                            ${sakai.api.Util.applyThreeDots(item["name"], 300) || item["_path"]}
                        </label>
                    </li>
                {/for}
            {else}
                {if query && query !== "*"}
                    <div class="oae-no-results-container">
                        <div class="oae-no-results-arrow-up"></div>
                        <div class="oae-no-results-icon oae-no-results-search-content"></div>
                        <p>__MSG__NO_RESULTS_DESCRIPTION_QUERY__</p>
                    </div>
                {elseif context == "everything"}
                    <div class="oae-no-results-container">
                        <div class="oae-no-results-arrow-up"></div>
                        <div class="oae-no-results-icon oae-no-results-upload"></div>
                        <p>__MSG__NO_RESULTS_DESCRIPTION_EVERYTHING__</p>
                    </div>
                {elseif context == "my_library"}
                    <div class="oae-no-results-container">
                        <div class="oae-no-results-arrow-up"></div>
                        <div class="oae-no-results-icon oae-no-results-upload"></div>
                        <p>__MSG__NO_RESULTS_DESCRIPTION_MY_LIBRARY__</p>
                    </div>
                {/if}
            {/if}
        </ul>
--></div>

<!--- Should work when uploading single/multiple items to My Library or someone else's library --->
<div id="addcontent_notification_finished_template" style="display:none;"><!--
    {if uploadcount === 1}
        __MSG__FILE_UPLOAD_PREFIX_SINGLE__
    {else}
        __MSG__FILE_UPLOAD_PREFIX_MULTI__
    {/if}
    
    {if uploadtocollection}
        __MSG__FILE_UPLOAD_SUFFIX_COLLECTION__
    {else}
        __MSG__FILE_UPLOAD_SUFFIX_LIBRARY__
    {/if}
--></div>

<!-- JAVASCRIPT -->
<script type="application/javascript" src="js/addcontent.js"></script>