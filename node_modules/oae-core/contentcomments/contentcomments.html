<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/node_modules/oae-core/contentcomments/css/contentcomments.css" />

<!-- MAIN VIEW -->
<div id="contentcomments_mainContainer" class="oae-widget-container" style="display:none;">
    <h2 class="oae-contentpage-title">__MSG__COMMENTS__</h2>

    <div id="contentcomments_userCommentContainer">
    </div>

    <div id="contentcomments_userCommentContainer_template" style="display:none"><!--
        <div id="contentcomments_userProfileAvatar">
            <img id="contentcomments_userProfileAvatarPicture" alt="__MSG__AVATAR__" class="contentcomments_avatar" src="${picture}" />
        </div>
        <div class="contentcomments_fillInCommentTopContainer oae-form-field-wrapper">
            <form>
                <label style="display:none" for="contentcomments_txtMessage">__MSG__ENTER_A_COMMENT__</label>
                <textarea id="contentcomments_txtMessage" name="contentcomments_txtMessage" class="required oae-error-calculate contentcomments_inputFields" cols="10" placeholder="__MSG__ENTER_A_COMMENT__" title="__MSG__ENTER_A_COMMENT__"></textarea>
                <div class="dialog_buttons contentcomments_dialog_buttons right">
                    <button id="contentcomments_postComment" type="submit" class="oae-button oae-overlay-button comment_postCommentTopBottom">__MSG__COMMENT__</button>
                </div>
            </form>
        </div>
    --></div>

    <div class="contentcomments_nextButtons">
        <div class="jq_pager contentcomments_jqpager" style="display:none;"><!-- In this container the pager on top will be shown --></div>
    </div>

    <div id="contentcomments_contentcommentsDisabled" style="display:none;">
        <p>__MSG__COMMENTS_ARE_CURRENTLY_DISABLED__</p>
    </div>

    <div id="contentcomments_showComments">
        <!-- In this container all contentcomments will be shown -->
    </div>
    <div id="contentcomments_showCommentsTemplate" style="display:none"><!--
    <div>
    <div class="contentcommentsTable">

        {for i in comments}
        <div class="contentcomments_comment {if comments.length == 1} last first {elseif i_index == comments.length - 1} first{elseif i_index == 0} last{/if}">
            <div class="contentcomments_leftCommentBar">
                <img alt="__MSG__AVATAR__" class="contentcomments_avatar" src="${i.user.pictureUrl}" />
            </div>
            <div class="contentcomments_topCommentBar">
                <div class="contentcomments_posterData oae-regular-links">
                    {if i.user.fullName}
                        <span class="contentcomments_posterDataName oae-regular-links"><a href="/~${i.user.uid}">${i.user.fullName}</a></span>
                    {else}
                        <span class="contentcomments_posterDataName oae-gray oae-regular-links">__MSG__UNDISCLOSED_USER__</span>
                    {/if}
                    <span class="contentcomments_dateComment">${i.timeAgo}</span>
                </div>
                {if (i.canDelete && i.canDelete === true) || (i.userid === sakai.data.me.user.userid && !sakai.data.me.user.anon)}
                    {if i["sakai:deleted"] && i["sakai:deleted"] === true}
                        <button type="button" class="oae-button contentcomments_undelete oae-regular-links oae-link-button" id="contentcomments_undelete_${i['sakai:id']}">__MSG__UNDELETE__</button>
                    {else}
                        <button type="button" class="oae-button contentcomments_delete oae-regular-links oae-link-button" id="contentcomments_delete_${i['sakai:id']}">__MSG__DELETE__</button>
                    {/if}
                {/if}
                <div class="contentcomments_commentMessage">
                    <div class="contentcomments_commentLinks">
                        <input type="hidden" id="contentcomments_path_${i['sakai:id']}" value="${i.commentId}" />
                            {if i.canEdit && i.canEdit === true}
                                <ul>
                                    <span class="dialog_buttons right">
                                        <li><button type="button" class="oae-button oae-button-link-2-state contentcomments_edit" id="contentcomments_edit_${i['sakai:id']}">
                                                <span class="oae-button-inner oae-button-link-2-state-inner oae-button-link-2-state-inner-secondary">__MSG__EDIT__</span>
                                            </button>
                                        </li>
                                    </span>
                                </ul>
                            {/if}
                    </div>

                    {if i["sakai:deleted"] && i["sakai:deleted"] === true}
                        <p class="contentcomments_infoDeleted">This comment has been deleted. Only site collaborators can see this comment.
                        {if i.canDelete && i.canDelete === true}
                            <br />You can return it by clicking the undelete link.
                        {/if}
                        </p>
                    {/if}
                    <div id="contentcomments_message_${i['sakai:id']}" class="contentcomments_message">
                        <p>${i.message}</p>
                    </div>
                    <div id="contentcomments_message_editContainer_${i['sakai:id']}" style="display:none;">
                        <textarea class="contentcomments_txtMessage" id="contentcomments_editComment_txt_${i['sakai:id']}" rows="7" cols="50" title="__MSG__EDIT_COMMENT__">${i.messageTxt}</textarea><br />
                        <div class="dialog_buttons right">
                            <button type="button" class="oae-button oae-button-primary contentcomments_editComment_save" id="contentcomments_editComment_save${i['sakai:id']}"><span class="oae-button-inner">__MSG__EDIT_COMMENT__</span></button>
                            <button type="button" class="oae-button contentcomments_editComment_cancel" id="contentcomments_editComment_cancel${i['sakai:id']}"><span class="oae-button-inner">__MSG__CANCEL__</span></button>
                        </div>
                    </div>
                </div>
            </div>
            <hr class="oae-push oae-hidden"/>
        </div>
        {forelse}
            {if sakai.data.me.user.anon}
                <div class="oae-no-results-container contentcomments_no_results">
                    <div class="oae-no-results-arrow-up"></div>
                    <div class="oae-no-results-icon oae-no-results-search-content"></div>
                    <h1>__MSG__NO_RESULTS_DESCRIPTION_CONTENTCOMMENTS__</h1>
                </div>
            {/if}
        {/for}
    </div>

    </div>
    --></div>
    <div class="contentcomments_nextButtons">
        <button type="button" class="oae-button" id="contentcomments_prevPage"><span class="oae-button-inner">__MSG__PREVIOUS_PAGE__</span></button><br />
        <div class="jq_pager contentcomments_jqpager" style="display:none;"><!-- In this container the pager will be shown (bottom) --></div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/node_modules/oae-core/contentcomments/javascript/contentcomments.js"></script>