<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/changepic.css" />
<link rel="stylesheet" type="text/css" href="/shared/vendor/js/jquery-plugins/jcrop/jquery.Jcrop.css" />

<!-- MODAL -->
<div id="changepic-modal" class="changepic-initial-view modal fade" tabindex="-1" role="dialog" aria-labelledby="changepic-modal-title" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>
                <h3 id="changepic-modal-title">__MSG__PROFILE_PICTURE__</h3>
            </div>
            <form id="changepic-form" role="form">
                <div class="modal-body">
                    <!-- HANDLING OF PICTURE UPLOAD -->
                    <div id="changepic-pic-container" class="text-center"><!-- --></div>

                    <!-- PICTURE IS BEING UPLOADED -->
                    <div id="changepic-uploading-container" class="hide text-center">
                        <div class="progress hide">
                            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <i class="icon-spinner icon-spin">
                            <span class="oae-aural-text">__MSG__UPLOADING__</span>
                        </i>
                    </div>

                    <!-- PICTURE IS SHOWN AFTER UPLOAD READY FOR CROPPING -->
                    <div id="changepic-jcrop-container" class="hide"><!-- --></div>

                    <!-- CROPPING IS IN PROGRESS -->
                    <div id="changepic-cropping-container" class="hide text-center">
                        <i class="icon-spinner icon-spin">
                            <span class="oae-aural-text">__MSG__CROPPING__</span>
                        </i>
                    </div>
                </div>
                <div class="modal-footer hide">
                    <button type="button" class="btn btn-link pull-left" data-dismiss="modal">__MSG__CANCEL__</button>
                    <button type="submit" id="changepic-set" class="btn btn-primary pull-right">__MSG__SET_PICTURE__</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div id="changepic-profile-picture-template"><!--
    <div id="changepic-dropzone" class="well">
        {if pictureUrl}
            <div class="oae-tile changepic-dropzone-content">
                <img src="${oae.api.util.addCacheBust(pictureUrl)}" alt="__MSG__PROFILE_PICTURE__"/>
            </div>
        {else}
            <div class="oae-tile changepic-dropzone-content {if oae.api.util.isHandheldDevice()} changepic-cannot-drag{/if}">
                <i class="icon-group hide"></i>
                <i class="icon-user hide"></i>
                <small class="text-center">__MSG__DRAG_A_PHOTO_HERE_TO_UPLOAD__</small>
            </div>
        {/if}
    </div>
    <span class="btn changepic-browse">
        <span>
            {if pictureUrl}
                __MSG__SELECT_NEW__
            {else}
                __MSG__BROWSE__
            {/if}
        </span>
        <input type="file" name="file" accept="image/*"/>
    </span>
--></div>

<div id="changepic-jcrop-template"><!--
    <img src="${oae.api.util.addCacheBust(pictureUrl)}" alt="__MSG__UPLOADED_PICTURE__" id="changepic-jcrop"/>
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/changepic.js"></script>
