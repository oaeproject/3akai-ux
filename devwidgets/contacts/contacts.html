<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/contacts/css/contacts.css" />

<!-- WIDGET HEADER -->
<div class="fl-widget-titlebar s3d-widget-titlebar contacts-widget-border" style="display:none">
    <div class="widget-titlebar-inner s3d-widget-titlebar-inner">
        <h2 id="contacts_title" class="contacts_title widget_title" style="display:none">__MSG__RECENT_CONTACTS__</h2>
    </div>
</div>

<!-- WIDGET BODY -->
<div class="fl-widget-content s3d-widget-content s3d-widget-small-content">
    <div id="contacts_container"><!----></div>
</div>

<div class="s3d-widget-no-options">
    <div class="s3d-widget-no-options-inner"><!----></div>
</div>

<div id="contacts_template"><!--
    <h1>__MSG__CONTACTS__ {if accepted.results.length} (${accepted.results.length}){/if}</h1>
    {if pending && pending.results.length}
        <div class="contacts_main" id="contacts_pending" style="display:none;">
            <h2>__MSG__PENDING_CONTACT_REQUEST_TO_OTHER_PEOPLE__</h2>
            {for pending in pending.results}
                <div class="fl-container fl-fix contacts_item">
                    <a href="/~${pending.profile.userid}"><img alt="pending icon" src="/dev/images/user_avatar_icon_32x32.png"></a>
                    <div class="contacts_list">
                        <div class="contacts_name s3d-bold contacts_pending_name">
                            <a href="/~${pending.profile.userid}" title="__MSG__VIEW__ ${sakai.api.User.getDisplayName(pending.profile)}">${sakai.api.User.getDisplayName(pending.profile)}</a>
                         </div>
                     </div>
                </div>
            {/for}
        </div>
    {/if}

    {if invited && invited.results.length}
        <div class="contacts_main" id="contacts_pending">
            <h2>__MSG__PENDING_CONTACT_REQUEST_FROM_OTHER_PEOPLE__</h2>
            {for invited in invited.results}
                <div class="fl-container fl-fix contacts_item">
                    <a href="/~${invited.profile.userid}"><img alt="pending icon" src="/dev/images/user_avatar_icon_32x32.png"></a>
                    <div class="contacts_list">
                        <div class="contacts_name s3d-bold">
                            <a href="/~${invited.profile.userid}" title="__MSG__VIEW__ ${sakai.api.User.getDisplayName(invited.profile)}">${sakai.api.Util.applyThreeDots(sakai.api.User.getDisplayName(invited.profile), 170, null, "s3d-bold")}</a>
                         </div>
                         <button type="button" class="s3d-link-button s3d-bold contacts_add_to_contacts" id="contacts_add_to_contacts_${invited.profile.userid}">__MSG__ADD_TO_CONTACTS__</button>
                     </div>
                </div>
            {/for}
        </div>
    {/if}

    <div class="contacts_main" id="contacts_accepted">
        {if accepted.results.length}
            {if sakai_global.profile.main.mode.value !== "view"}
                <h2>__MSG__MY_CONTACTS__</h2>
            {else}
                <h2>${sakai_global.profile.main.data.basic.elements.firstName.value}'s __MSG__CONTACTS__</h2>
            {/if}
            {for accepted in accepted.results}
                <div class="fl-container fl-fix contacts_item contacts_accepted_items">
                    <img alt="accepted icon" src="/dev/images/user_avatar_icon_32x32.png">
                    <div class="contacts_list">
                        {if sakai_global.profile.main.mode.value !== "view"}
                            <button type="button" class="s3d-button s3d-button-link-2-state contact_delete_button" id="contacts_delete_contact_${accepted.profile.userid}">
                                <span class="s3d-button-inner s3d-button-link-2-state-inner">X</span>
                            </button>
                        {/if}
                        <div class="contacts_name s3d-bold s3d-regular-links">
                            <a href="/~${accepted.profile.userid}" title="__MSG__VIEW__ ${sakai.api.User.getDisplayName(accepted.profile)}">${sakai.api.Util.applyThreeDots(sakai.api.User.getDisplayName(accepted.profile), 170, null, "s3d-bold")}</a>
                         </div>
                        <button type="button" class="s3d-link-button contacts_message s3d-bold sakai_sendmessage_overlay" sakai-entityid="${accepted.profile.userid}" sakai-entityname="${sakai.api.User.getDisplayName(accepted.profile)}" sakai-entitytype="user">
                            __MSG__MESSAGE__
                        </button>
                     </div>
                 </div>
             {/for}
         {else}
            {if sakai_global.profile.main.mode.value !== "view"}
                <a href="/search/people#q=*&filter=&facet=&page=1" title="__MSG__FIND_CONTACTS__" class="contacts_no_contacts">
                    <button type="button" class="s3d-button s3d-button-link-2-state contact_search_button">
                        <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__FIND_CONTACTS__</span>
                    </button>
                </a>
                <span class="contacts_no_contacts">__MSG__FIND_PEOPLE_AND_ADD_THEM__</span>
            {else}
                <span class="contacts_no_contacts">${sakai_global.profile.main.data.basic.elements.firstName.value} __MSG__HAS_NO_CONTACTS__</span>
                <button type="button" class="s3d-button s3d-button-link-2-state contact_search_button" style="display:none">
                    <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__ADD__ ${sakai_global.profile.main.data.basic.elements.firstName.value} __MSG__AS_A_CONTACT__</span>
                </button>
            {/if}
         {/if}
    </div>
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/contacts/javascript/contacts.js"></script>