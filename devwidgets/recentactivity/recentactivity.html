<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/recentactivity/css/recentactivity.css" />

<div class="recentactivity_widget s3d-widget-container">
    <div class="s3d-contentpage-title">__MSG__RECENT_ACTIVITY__</div>
    <div id="recentactivity_activity_container"><!----></div>
</div>

<div id="recentactivity_activity_item_template"><!--
    {if data.length}
        {for activity in data}
            <div class="recentactivity_activity_item_container" {if activity.fadeIn}style="display:none;"{/if}>
                <div class="recentactivity_activity_item_content">
                    <div class="recentactivity_activity_icon recentactivity_activity_${activity["sakai:activity-appid"]}"></div>
                    {var username = activity.who.userid}
                    <a href="/~${username}" title="__MSG__VIEW_USERS_PROFILE__" class="recentactivity_activity_item_title s3d-regular-links s3d-bold">
                        <img src="${activity.who.picture}" alt="${activity.who.name}" class="recentactivity_activity_item_image"/>
                    </a>
                    <a href="/~${username}" title="__MSG__VIEW_USERS_PROFILE__" class="recentactivity_activity_item_title recentactivity_activity_item_text s3d-regular-links s3d-bold">${activity.who.name}</a>
                    <span class="recentactivity_activity_item_description">${activity["sakai:activityMessage"]}{if activity.showdetails}:{/if}</span>
                </div>
                {if activity.showdetails}
                    <div class="recentactivity_activity_item_content">
                        {var filename = activity["sakai:pooled-content-file-name"]}
                        {var thumbnail = sakai.api.Content.getThumbnail(activity)}
                        <a href="/content#p=${activity["_path"]|urlSafe}/${filename|urlSafe}" title="__MSG__VIEW_FILE__" class="s3d-bold">
                            {if thumbnail}
                                <img src="${thumbnail}" class="recentactivity_activity_item_image" alt="${filename}"/>
                            {else}
                                <img src="${sakai.api.Content.getMimeTypeData(activity["sakai:custom-mimetype"] || activity["_mimeType"]).URL}" alt="activity["sakai:pooled-content-file-name"]" class="recentactivity_activity_item_image"/>
                            {/if}
                        </a>
                        <a href="/content#p=${activity["_path"]|urlSafe}/${activity["sakai:pooled-content-file-name"]|urlSafe}" title="__MSG__VIEW_FILE__" class="recentactivity_activity_item_title recentactivity_activity_item_text s3d-regular-links s3d-bold">${filename}</a>
                        <span class="recentactivity_activity_item_description">__MSG__USED_IN__ ${activity.usedin} {if activity.usedin == 1} __MSG__PLACE__ {else} __MSG__PLACES__{/if}</span>
                    </div>
                {/if}
            </div>
            {if activity_index != data.length - 1}
                <hr class="s3d-split-line fl-push">
            {/if}
        {/for}
    {else}
        <div class="s3d-no-results-container">
            <div class="s3d-no-results-arrow-up"></div>
            <div class="s3d-no-results-icon s3d-no-results-people"></div>
            <h1>__MSG__NO_RESULTS_DESCRIPTION__</h1>
            {if !sakai.data.me.user.anon}
                <h1>
                    <a href="/search#l=people&q=*" title="__MSG__ADD_PEOPLE__" class="s3d-regular-links">__MSG__ADD_PEOPLE__</a>
                    <a href="/create" title="__MSG__ADD_CONTENT__" class="s3d-regular-links">__MSG__ADD_CONTENT__</a>
                </h1>
            {/if}
        </div>
        <div id="recentactivity_noresults_example"></div>
    {/if}
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/recentactivity/javascript/recentactivity.js"></script>
