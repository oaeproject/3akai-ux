<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/contentpreview/css/contentpreview.css" />
<div style="display:none;">IE Fix</div>
<div id="contentpreview_widget_main_container" class="contentpreview_widget">
</div>

<div id="contentpreview_widget_main_template" style="display:none"><!--
    {if type === "default"}
        <div class="contentpreview_default_preview" id="contentpreview_default_preview">
            <div id="contentpreview_default_preivew_button">
                {if sakai_global.content_profile.content_data.data["jcr:content"]["jcr:mimeType"] === "x-sakai/link"}
                    <a id="contentpreview_download_button" href="${sakai_global.content_profile.content_data.data["sakai:pooled-content-url"]}" class="s3d-button s3d-button-primary" target="_blank">
                        <span class="s3d-button-inner">Open Link</span>
                    </a>
                {else}
                    <a id="contentpreview_download_button" href="${sakai_global.content_profile.content_data.path}" class="s3d-button s3d-button-primary" target="_blank">
                        <span class="s3d-button-inner">Download</span>
                    </a>
                {/if}
                {if sakai_global.content_profile.content_data.isManager}
                    <div id="contentpreview_actions_container" class="contentpreview_actions_container_default">
                        <button type="submit" class="s3d-button s3d-button-secondary" id="content_preview_delete">
                            <span class="s3d-button-inner">Delete</span>
                        </button>
                        <button type="submit" class="s3d-button s3d-button-secondary new_version" id="upload_content">
                            <span class="s3d-button-inner">Upload new version</span>
                        </button>
                    </div>
                {/if}
            </div>
            <div id="contentpreview_default_preview_image">
            {if sakai.config.MimeTypes[sakai_global.content_profile.content_data.data["jcr:content"]["jcr:mimeType"]]}
                <img id="entity_profile_picture" src="${sakai.config.MimeTypes[sakai_global.content_profile.content_data.data["jcr:content"]["jcr:mimeType"]].URL}" alt="${sakai.config.MimeTypes[sakai_global.content_profile.content_data.data["jcr:content"]["jcr:mimeType"]].description}"/>
            {else}
              <img id="entity_profile_picture" src="${sakai.config.MimeTypes["other"].URL}" alt="${sakai.config.MimeTypes["other"].description}"/>
            {/if}
            </div>
            <div id="contentpreivew_default_preivew_data">
                Created by <a class="s3d-action" href="/~${sakai_global.content_profile.content_data.data["sakai:pool-content-created-for"]}">${sakai_global.content_profile.content_data.creator}</a> <br/>
                ${sakai.api.Util.convertToHumanReadableFileSize(sakai_global.content_profile.content_data.data["jcr:content"]["jcr:data"].split(":")[1])}<br/>
                {if sakai_global.content_profile.content_data.data["jcr:content"]["jcr:mimeType"] !== "x-sakai/link"}
                    ${sakai_global.content_profile.content_data.data["jcr:content"]["jcr:mimeType"]}
                {/if}
            </div>
        </div>
    {else}
        <div class="contentpreview_videoaudio_preview contentpreview_other_preview" id="contentpreview_videoaudio_preview"></div>
        <div class="contentpreview_flash_preview contentpreview_other_preview" id="contentpreview_flash_preview"></div>
        <div class="contentpreview_text_preview contentpreview_other_preview" id="contentpreview_text_preview"></div>
        <div class="contentpreview_html_preview contentpreview_other_preview" id="contentpreview_html_preview"></div>
        <div class="contentpreview_image_preview" id="contentpreview_image_preview"></div>
        <div id="contentpreview_other_preview_buttons">
            <a id="contentpreview_download_button" href="${sakai_global.content_profile.content_data.path}" class="s3d-button s3d-button-primary" target="_blank">
                <span class="s3d-button-inner">Download</span>
            </a>
            {if sakai_global.content_profile.content_data.isManager}
                <div id="contentpreview_actions_container">
                    <button type="submit" class="s3d-button s3d-button-secondary" id="content_preview_delete">
                        <span class="s3d-button-inner">Delete</span>
                    </button>
                    <button type="submit" class="s3d-button s3d-button-secondary new_version" id="upload_content">
                        <span class="s3d-button-inner">Upload new version</span>
                    </button>
                </div>
            {/if}
        </div>
    {/if}
--></div>

<div id="contentpreview_templates">
    <div id="contentpreview_image_template"><!--
        <img src="${contentURL}" id="contentpreview_image_rendered" />
    --></div> 
    <div id="contentpreview_html_template"><!--
        <iframe id="contentpreview_html_iframe"></iframe>
    --></div>
</div>

<div id="contentpreview_image_calculatesize_container">
    <div id="contentpreview_image_calculatesize">
        <!-- Image will be pre-loaded here -->
    </div>
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/contentpreview/javascript/contentpreview.js"></script>
