<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/entity/css/entity.css" />

<div id="entity_container"><!-- --></div>

<div id="entity_user_template" style="display:none"><!--
    <div id="entity_actions">
        {if !anon}
            {if type != "user_anon" && type != "user_me"}
                {if type == "user_other"}
                    <button id="entity_user_add_to_contacts" class="s3d-button s3d-button-link-2-state sakai_addtocontacts_overlay" sakai-entityid="${data.userid}" sakai-entityname="${data.displayName}" type="button">
                        <div id="entity_add_icon"></div>
                        <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__ADD_TO_CONTACTS__</span>
                    </button>
                {elseif type == "contact_invited"}
                    <button id="entity_user_accept_invitation" class="s3d-button s3d-button-link-2-state" type="button">
                        <div id="entity_add_icon"></div>
                        <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__ACCEPT_INVITATION__</span>
                    </button>
                {elseif type == "contact_pending"}
                    <button class="entity_user_contact_pending" type="button">
                        <span class="entity_user_contact_pending_inner">__MSG__CONTACT_INVITATION_SENT__</span>
                    </button>
                {/if}
                <button id="entity_user_message" class="s3d-button s3d-button-link-2-state sakai_sendmessage_overlay" type="button" sakai-entityid="${data.userid}" sakai-entityname="${data.displayName}" sakai-entitytype="user">
                    <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__MESSAGE__</span>
                </button>
            {/if}
        {/if}
    </div>
    {if type && type == "user_me"}
        <div id="entity_user_image" class="entity_my_profilepic">
            <img src="/devwidgets/entity/images/entity_changepic_arrow.png" class="entity_changepic_arrow"/>
            <div class="entity_profilepic_internal">
                <img id="entity_profile_picture" src="{if data.picture}${data.picture}{else}/devwidgets/entity/images/entity_default_user.png{/if}"/>
            </div>
        </div>
        <div class="entity_user_picture_dropdown entity_user_dropdown" style="display:none;">
            <div class="entity_dropdown_tr"></div>
            <div class="entity_dropdown_content s3d-dropdown-menu">
                <ul>
                    <li><a id="changepic_container_trigger" href="javascript:;">__MSG__CHANGE_PICTURE__</a></li>
                </ul>
            </div>
            <div class="entity_dropdown_bottom"></div>
        </div>
        <div class="s3d-bold entity_name_me">${data.displayName}</div>
    {else}
        <div id="entity_user_image" class="entity_other_profilepic">
            <div class="entity_profilepic_internal">
                <img id="entity_profile_picture" src="{if data.picture}${data.picture}{else}/devwidgets/entity/images/entity_default_user.png{/if}"/>
            </div>
        </div>
        <div id="entity_name" class="s3d-bold">${data.displayName}</div>
        <div id="entity_owns" class="s3d-regular-links">
            <span class="entity_number">(${data.counts["content"]})</span> <a href="#l=library" title="${data.counts["content"]} Documents">Documents</a>,
            <span class="entity_number">(${data.counts["memberships"]})</span> <a href="#l=memberships" title="${data.counts["memberships"]} Memberships">Memberships</a>,
            <span class="entity_number">(${data.counts["contacts"]})</span> <a href="#l=contacts" title="${data.counts["contacts"]} Contacts">Contacts</a>
        </div>
    {/if}
--></div>

<div id="entity_newaccount_template" style="display:none"><!--
    <div class="s3d-bold entity_plaintitle">Create new account</div>
--></div>

<div id="entity_acknowledgements_template" style="display:none"><!--
    <div class="s3d-bold entity_plaintitle">Acknowledgements</div>
--></div>

<div id="entity_search_template" style="display:none"><!--
    <div class="s3d-bold entity_plaintitle">Search</div>
--></div>

<div id="entity_directory_template" style="display:none"><!--
    <div id="entity_directory_image" class="entity_directory_image">
        {if data.icon}
            <img src="${data.icon}"/>
        {else}
            <img src="/dev/images/hierarchy.png"/>
        {/if}
    </div>
    <div id="entity_name" class="s3d-bold entity_plaintitle">${data.title}</div>
--></div>

<div id="entity_content_template" style="display:none"><!--
    <div id="entity_actions">
        {if !anon}
            {if type && type == "content_not_shared"}
                <button id="entity_content_add_to_library" class="s3d-button s3d-button-link-2-state" type="button">
                    <div id="entity_add_icon"></div>
                    <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__ADD_TO_MY_LIBRARY__</span>
                </button>
            {elseif type && type == "content_managed"}
                <button id="entity_content_permissions" class="s3d-button s3d-button-link-2-state" type="button">
                    <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__PERMISSIONS__</span>
                </button>
            {/if}
            <button id="entity_content_share" class="s3d-button s3d-button-link-2-state" type="button">
                <span class="s3d-button-inner s3d-button-link-2-state-inner">__MSG__SHARE__</span>
            </button>
        {/if}
    </div>
    <div id="entity_content_image" class="entity_content_image">
            <img src="${data.data['iconURL']}"/>
    </div>
    <span id="entity_name" class="s3d-bold contentmetadata_editable">${data.data["sakai:pooled-content-file-name"]}</span>
    <span id="entity_name_edit" style="display:none">
        <input id="entity_name_text" type="text" size="50" />
    </span>
    <div id="entity_owns" class="s3d-regular-links">
        {var peopleCount = data.members.counts.people}
        <span class="entity_number">Used by (<a href="#" title="${peopleCount} {if peopleCount == 1} __MSG__PERSON__{else} __MSG__PEOPLE__{/if}">${peopleCount}</a>)</span> <a href="#" title="${peopleCount} {if peopleCount == 1} __MSG__PERSON__{else} __MSG__PEOPLE__{/if}">{if peopleCount == 1}__MSG__PERSON__{else}__MSG__PEOPLE__{/if}</a> and
        {var groupCount = data.members.counts.groups}
        <span class="entity_number">(<a href="#" title="${groupCount} {if groupCount == 1} __MSG__GROUP__{else} __MSG__GROUPS__{/if}">${groupCount}</a>)</span> <a href="#" title="${groupCount} {if groupCount == 1} __MSG__GROUP__{else} __MSG__GROUPS__{/if}">{if groupCount == 1} __MSG__GROUP__{else} __MSG__GROUPS__{/if}</a>
        <span class="entity_number entity_permissions_label">Visible to anyone with the link</span>
    </div>
--></div>

<div id="entity_group_template" style="display:none"><!--
    <div id="entity_actions">
        {if !anon}
            {if type === "group_managemode"}
                <button id="entity_group_back" class="s3d-button s3d-button-link-2-state" type="button">
                    <span class="s3d-button-inner s3d-button-link-2-state-inner">Back to pages</span>
                </button>
            {else}
                <button id="entity_message" class="s3d-button s3d-button-link-2-state" type="button">
                    <span class="s3d-button-inner s3d-button-link-2-state-inner">Message</span>
                </button>
                {if type === "group_managed"}
                    <button id="entity_manage_group" class="s3d-button s3d-button-link-2-state" type="button">
                        <span class="s3d-button-inner s3d-button-link-2-state-inner">Manage group</span>
                    </button>
                {/if}
            {/if}
        {/if}
    </div>
    <div id="entity_group_image" class="entity_group_image {if type && type == "group_managed"} entity_user_image_pointer{/if} "></div>
    <div id="entity_name" class="s3d-bold">${data.authprofile["sakai:group-title"]}</div>
    <div id="entity_owns" class="s3d-regular-links">
        <span class="entity_number">(1)</span> <a href="#l=library" title="1 Documents">Documents</a>,
        <span class="entity_number">(2)</span> <a href="#l=memberships" title="(2) Participants">Participants</a>
    </div>
    {if type && type == "group_managed"}
        <div class="entity_user_picture_dropdown entity_user_dropdown" style="display:none;">
            <div class="entity_dropdown_tr"></div>
            <div class="entity_dropdown_content s3d-dropdown-menu">
                <ul>
                    <li><a href="#">__MSG__CHANGE_PICTURE__</a></li>
                </ul>
            </div>
            <div class="entity_dropdown_bottom"></div>
        </div>
    {/if}
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/entity/javascript/entity.js"></script>
