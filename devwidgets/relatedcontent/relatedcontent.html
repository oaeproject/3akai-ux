<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/relatedcontent/css/relatedcontent.css" />

<div class="relatedcontent">
    <div class="relatedcontent_title">
        __MSG__RELATED_CONTENT__
    </div>

    <!-- CONTAINER FOR RELATEDCONTENT -->
    <div id="relatedcontent_container" style="display:none"><!-- --></div>

    <div id="relatedcontent_default_template"><!--
        <div class="s3d-action">
            <div class="relatedcontent_list">
                {var relatedcontent_index = 0}
                {for i in relatedContent.results}
                    {if i['sakai:pooled-content-file-name'] && relatedcontent_index < 10 && i['_path'] !== content.data["_path"]}
                        {var contentFound = true}
                        <div class="relatedcontent_content">
                            {var mimeType = sakai.api.Content.getMimeType(i)}
                            {var thumbnail = sakai.api.Content.getThumbnail(i)}
                            <a href="/content#p=${i['_path']|urlSafe}/${i['sakai:pooled-content-file-name']|urlSafe}" title="${i['sakai:pooled-content-file-name']}">
                                {if thumbnail}
                                    {var mimeTypeDescription = sakai.config.MimeTypes[mimeType].description}
                                    <img class="s3d-icon-32" src="${thumbnail}" alt="${mimeTypeDescription}" />
                                {elseif (mimeType.substring(0,6)=="image/")}
                                    {var mimeTypeDescription = sakai.config.MimeTypes[mimeType].description}
                                    <img class="s3d-icon-32" src="/p/${i['_path']}" alt="${sakai.api.i18n.General.getValueForKey(mimeTypeDescription)}" />
                                {elseif sakai.config.MimeTypes[mimeType]}
                                    {var mimeTypeDescription = sakai.config.MimeTypes[mimeType].description}
                                    <img class="s3d-icon-32" src="${sakai.config.MimeTypes[mimeType].URL}" alt="${sakai.api.i18n.General.getValueForKey(mimeTypeDescription)}" />
                                {else}
                                    {var mimeTypeDescription = sakai.config.MimeTypes["other"].description}
                                    <img class="s3d-icon-32" src="${sakai.config.MimeTypes["other"].URL}" alt="${sakai.api.i18n.General.getValueForKey(mimeTypeDescription)}" />
                                {/if}
                            </a>
                            <div class="relatedcontent_content_right">
                                <a class="s3d-regular-light-links threedots_text" href="/content#p={if i['sakai:pooled-content-file-name']}${i['_path']|urlSafe}/${i['sakai:pooled-content-file-name']|urlSafe}" title="${i['sakai:pooled-content-file-name']}"{else}${i['_path']|urlSafe}" title="${i['_path']}"{/if}>
                                <span class="ellipsis_text">
                                    {if i['sakai:pooled-content-file-name']}
                                        ${i['sakai:pooled-content-file-name']}
                                    {elseif i['_path']}
                                        ${i['_path']}
                                    {/if}
                                    </span>
                                </a>
                            </div>
                        </div>
                        ${relatedcontent_index++|eat}
                    {/if}
                {/for}
                {if relatedcontent_index === 0}
                    <div class="relatedcontent_no_content">
                        __MSG__NO_RELATED_CONTENT_FOUND__
                    </div>
                {/if}
            </div>
        </div>
    --></div>

</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/relatedcontent/javascript/relatedcontent.js"></script>
