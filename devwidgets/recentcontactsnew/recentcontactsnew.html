<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/recentcontactsnew/css/recentcontactsnew.css" />

<div class="recentcontactsnew_widget">
    <div class="recentcontactsnew_content">
       <div class="recentcontactsnew_add_container">
           <div id="recentcontactsnew_no_results_container" style="display:none;">
                <div class="s3d-no-results-container">
                    <div class="s3d-no-results-arrow-up"></div>
                    <div class="s3d-no-results-icon s3d-no-results-contacts-small"><!----></div>
                    <h1>__MSG__NO_RESULTS_DESCRIPTION__ <a class="s3d-regular-links" href="/search#l=people" title="__MSG__ADD_CONTACTS__">__MSG__FIND_AND_ADD_PEOPLE__</a></h1>
                </div>
            </div>
        </div>
       <!-- MAIN recentcontactsnew -->
        <div class="recentcontactsnew_main">
            <div class="recentcontactsnew_item"></div>
            <div id="recentcontactsnew_item_template"><!--
                <div class="recentcontactsnew_item_img fl-force-left">
                    <a href="#">
                        <img class="s3d-icon-50" src="${profilePicture}"/>
                    </a>
                </div>
                <div class="recentcontactsnew_item_info">
                    <p class="recentcontactsnew_item_title">
                        <a class="recentcontactsnew_item_link s3d-widget-links s3d-bold" href="/~${profile.userid|uriCompSafe}">
                            ${displayName}
                        </a>
                    </p>
                    {if profile.counts && profile.counts.contentCount > 0}
                        <p class="recentcontactsnew_item_meta">${profile.counts.contentCount}{if profile.counts.contentCount === 1} __MSG__CONTENT_ITEM__{else} __MSG__CONTENT_ITEMS__{/if}</p>
                    {/if}
                    {if profile.counts && profile.counts.contactsCount > 0}
                        <p class="recentcontactsnew_item_meta">${profile.counts.contactsCount}{if profile.counts.contactsCount === 1} __MSG__CONTACT__{else} __MSG__CONTACTS__{/if}</p>
                    {/if}
                    {if profile.counts.membershipsCount > 0}
                        <p class="recentcontactsnew_item_meta">${profile.counts.membershipsCount}{if profile.counts.membershipsCount === 1} __MSG__MEMBERSHIP__{else} __MSG__MEMBERSHIPS__{/if}</p>
                    {/if}
                </div>

                <div class="recentcontactsnew_related_details">
                    <div id="recentcontactsnew_latest_content_container"></div>
                    <div id="recentcontactsnew_recent_connection_container"></div>
                </div>

            --></div>
        </div>
    </div>

    <div id="recentcontactsnew_recent_connection_template"><!--
        {if connection}
            <div class="recentcontactsnew_item_related_info">
                <p class="recentcontactsnew_item_meta_data">${firstName} __MSG__RECENT_CONNECTION__</p>
                <div class="fl-force-left">
                <a href="/~${connection.connectionId}">
                    <img class="s3d-icon-32" src="${connection.connectionPicture}" />
                </a>
                </div>
                <div class="recentcontactsnew_item_div">
                    <a class="recentcontactsnew_item_link s3d-widget-links s3d-bold" href="/~${connection.connectionId}" title="${connection.connectionName}">
                        ${connection.connectionName}
                    </a>
                </div>
            </div>
        {/if}
    --></div>

    <div id="recentcontactsnew_latest_content_template"><!--
        {if content}
            <div class="recentcontactsnew_item_related_info">
                <p class="recentcontactsnew_item_meta_data">${author.authorName} __MSG__RECENT_UPLOAD__</p>
                <div class="fl-force-left">
                    <a href="/content#p=${content['_path']|uriCompSafe}/${content["sakai:pooled-content-file-name"]|uriCompSafe}" title="${content.name}">
                    <span>
                        {if content.thumbnail}
                            <img class="s3d-icon-32" src="${content.thumbnail}" alt="${content.type}" />
                        {elseif (content._mimeType.substring(0,6)=="image/")}
                            <img class="s3d-icon-32" src="/p/${content['_path']}" alt="${content.type}" />
                        {else}
                            <img class="s3d-icon-32" src="${content.type_img_url}" alt="${content.type}" />
                        {/if}
                    </span>
                    </a>
                </div>
                <div class="recentcontactsnew_item_div">
                    <a class="recentcontactsnew_item_link s3d-widget-links s3d-bold" href="/content#p=${content['_path']|uriCompSafe}/${content["sakai:pooled-content-file-name"]|uriCompSafe}">
                        ${content.name}
                    </a>
                    <span class="recentcontactsnew_content_mimetype">${content.type}</span>
                    <div>
                        {if content.placeCount > 0}
                            <p class="recentcontactsnew_item_meta">__MSG__USED_IN__ ${content.placeCount}{if content.placeCount === 1} __MSG__PLACE__{else} __MSG__PLACES__{/if}</p>
                        {/if}
                        {if content.commentCount > 0}
                            <p class="recentcontactsnew_item_meta">${content.commentCount}{if content.commentCount === 1} __MSG__COMMENT__{else} __MSG__COMMENTS__{/if}</p>
                        {/if}
                    </div>
                </div>
            </div>
        {/if}
    --></div>

    <div class="s3d-widget-footer">
        <a class="recentcontactsnew_item_link s3d-widget-links" href="/me#l=contacts">
            __MSG__SEE_ALL_MY_CONTACTS__
        </a>
    </div>

</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/recentcontactsnew/javascript/recentcontactsnew.js"></script>
