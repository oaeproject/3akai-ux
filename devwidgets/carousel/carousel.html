<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/carousel/css/carousel.css" />

<div style="display:none">__MSG__IE_PLACEHOLDER__</div>

<div id="carousel_container_tl"><div id="carousel_container_tr"></div></div>
<div id="carousel_container" class="jcarousel-skin-tango"><!----></div>
<div id="carousel_container_bl"><div id="carousel_container_br"></div></div>

<div id="carousel_single_column_template" style="display:none;"><!--
    <h1>__MSG__SUGGESTED__:</h1>
    {macro tags(t)}
        {if t && t.length}
            <div class="carousel_content_tags">
                <img src="/devwidgets/entity/images/entity_tags_icon.png" class="carousel_tag_icon" alt="__MSG__TAGS__:">
                {for tag in t}
                    {if tag_index < 2}
                        <a href="/search#q=${tag}" class="s3d-regular-links s3d-bold">${tag|safeOutput}</a>
                        {if tag_index < 1}<div class="carousel_middot_divider">&#183;</div>{/if}
                    {/if}
                {/for}
            </div>
        {/if}
    {/macro}

    {macro contentButtons(id, uploader)}
        <span class="carousel_bottom_buttons">
            <button type="button" class="s3d-link-button s3d-action-icon s3d-actions-share carousel_sharecontent share_trigger_click" data-entityid="${id}" title="__MSG__SHARE_CONTENT__"></button>
            <button type="button" class="s3d-link-button s3d-action-icon s3d-actions-addtolibrary carousel_savecontent savecontent_trigger" data-entityid="${id}" title="__MSG__SAVE_CONTENT__"></button>
            <button type="button" class="s3d-link-button s3d-action-icon s3d-actions-author personinfo_trigger_click" data-userid="${uploader}" title="__MSG__VIEW_OWNER_INFO__"></button>
        </span>
    {/macro}

    {if data.length}
        <ul>
            {for item in data}
                <li>
                        {if item.contentType == "suggestedContent"}
                            <div class="carousel_three_column_container">
                                <div class="carousel_three_column_left">
                                    {var content0 = item.suggestions[0]}
                                    {if content0}
                                        {if content0.preview}
                                            <img src="${content0.preview}" alt="__MSG__CONTENT_PREVIEW__"/>
                                        {/if}
                                        <h2>
                                            <a class="carousel_item_title s3d-action carousel_apply_threedots threedots_allow_2" href="${content0.url}">
                                                ${content0.title|safeOutput}
                                            </a>
                                        </h2>
                                        <p class="carousel_item_desc carousel_apply_threedots threedots_allow_6">${content0.description|safeOutput}</p>
                                        ${tags(content0.tags)}
                                        ${contentButtons(content0.id, content0.createdBy)}
                                    {/if}
                                </div>
                                <div class="carousel_three_column_middle">
                                    {var content1 = item.suggestions[1]}
                                    {if content1}
                                        {if content1.preview}
                                            <img src="${content1.preview}" alt="__MSG__CONTENT_PREVIEW__"/>
                                        {/if}
                                        <h2>
                                            <a class="carousel_item_title s3d-action carousel_apply_threedots threedots_allow_2" href="${content1.url}">
                                                ${content1.title|safeOutput}
                                            </a>
                                        </h2>
                                        <p class="carousel_item_desc carousel_apply_threedots threedots_allow_6">${content1.description|safeOutput}</p>
                                        ${tags(content1.tags)}
                                        ${contentButtons(content1.id, content1.createdBy)}
                                    {/if}
                                </div>
                                <div class="carousel_three_column_right">
                                    <div class="carousel_two_high_top">
                                        {var content2 = item.suggestions[2]}
                                        {if content2}
                                            <h2>
                                                <a class="carousel_item_title s3d-action carousel_apply_threedots threedots_allow_2" href="${content2.url}">
                                                    ${content2.title|safeOutput}
                                                </a>
                                            </h2>
                                            ${tags(content2.tags)}
                                            ${contentButtons(content2.id, content2.createdBy)}
                                        {/if}
                                    </div>
                                    <div class="carousel_two_high_bottom">
                                        {var content3 = item.suggestions[3]}
                                        {if content3}
                                            <h2>
                                                <a class="carousel_item_title s3d-action carousel_apply_threedots threedots_allow_2" href="${content3.url}">
                                                    ${content3.title|safeOutput}
                                                </a>
                                            </h2>
                                            ${tags(content3.tags)}
                                            ${contentButtons(content3.id, content3.createdBy)}
                                        {/if}
                                    </div>
                                </div>
                            </div>
                        {elseif item.contentType == "suggestedUsers"}
                            <div class="carousel_4x2_grid_container">
                                {for user in item.suggestions}
                                    <div>
                                        {if user.picture}
                                            <img src="/~${user.userid|safeURL}/public/profile/${user.picture.name}" alt="__MSG__PROFILE_PICTURE_FOR__ ${user.displayName|safeOutput}"/>
                                        {else}
                                            <img src="/dev/images/default_User_icon_50x50.png" alt="__MSG__DEFAULT_PROFILE_PICTURE_FOR__ ${user.displayName|safeOutput}"/>
                                        {/if}
                                        <h2><a href="/~${user.userid|safeURL}" class="carousel_item_title s3d-action carousel_apply_threedots threedots_allow_2">${user.displayName|safeOutput}</a></h2>
                                        <div class="carousel_counts">
                                            <ul>
                                                <li>
                                                    <a class="s3d-regular-light-links" href="/~${user.userid|safeURL}#l=library">${user.counts.contentCount} __MSG__CONTENT_ITEMS__</a>
                                                </li>
                                                <li>
                                                    <a class="s3d-regular-light-links" href="/~${user.userid|safeURL}#l=contacts">${user.counts.contactsCount} __MSG__CONTACTS__</a>
                                                </li>
                                                <li>
                                                    <a class="s3d-regular-light-links" href="/~${user.userid|safeURL}#l=memberships">${user.counts.membershipsCount} __MSG__MEMBERSHIPS__</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="carousel_bottom_buttons">
                                            {if !user.connected}
                                                <button type="button" class="s3d-link-button s3d-action-icon s3d-actions-addtolibrary sakai_addtocontacts_overlay" sakai-entityid="${user.userid}" sakai-entityname="${user.displayName|safeOutput}" title="__MSG__ADD_TO_CONTACTS__"></button>
                                            {/if}
                                            <button type="button" class="s3d-actions-message s3d-link-button s3d-action-icon sakai_sendmessage_overlay" sakai-entityid="${user.userid}" sakai-entityname="${user.displayName|safeOutput}" sakai-entitytype="user" title="__MSG__SEND_A_MESSAGE__"></button>
                                        </div>
                                    </div>
                                {/for}
                            </div>
                        {elseif item.contentType == "suggestedGroups"}
                            <div class="carousel_4x2_grid_container">
                                {for group in item.suggestions}
                                    {var tall = group_index < 2}
                                    <div class="carousel_4x2_{if tall}tall{else}short{/if}">
                                        {if group.picture}
                                            <img src="${group.picture}" alt="__MSG__PROFILE_PICTURE_FOR__ ${group.title|safeOutput}"/>
                                        {else}
                                            <img src="/dev/images/group_avatar_icon_64x64_nob.png" alt="__MSG__DEFAULT_PROFILE_PICTURE_FOR__ ${group.title|safeOutput}"/>
                                        {/if}
                                        <h2>
                                            <a href="/~${group.groupid}" class="carousel_item_title s3d-action carousel_apply_threedots threedots_allow_2">
                                                ${group.title|safeOutput}
                                            </a>
                                        </h2>
                                        {if tall}
                                            <p class="carousel_item_desc carousel_apply_threedots threedots_allow_5">
                                                ${group.description|safeOutput}
                                            </p>
                                        {/if}
                                        <div class="carousel_counts">
                                            <ul>
                                                <li>
                                                    <a class="s3d-regular-light-links" href="/~${group.groupid}#l=library">${group.counts.contentCount} __MSG__CONTENT_ITEMS__</a>
                                                </li>
                                                <li>
                                                    <a class="s3d-regular-light-links" href="/~${group.groupid}#l=participants">${group.counts.membersCount} __MSG__PARTICIPANTS__</a>
                                                </li>

                                            </ul>
                                        </div>
                                        ${tags(group.tags)}
                                        <span class="carousel_bottom_buttons">
                                            <button type="button" class="s3d-link-button s3d-action-icon s3d-actions-addtolibrary sakai_joingroup_overlay" data-groupid="${group.groupid}" title="__MSG__JOIN_GROUP__"></button>
                                            <button type="button" class="s3d-actions-message s3d-link-button s3d-action-icon sakai_sendmessage_overlay" sakai-entityid="${group.groupid}" sakai-entityname="${group.title|safeOutput}" sakai-entitytype="group" title="__MSG__SEND_A_MESSAGE__"></button>
                                        </span>

                                    </div>
                                {/for}
                            </div>
                        {/if}
                </li>
            {/for}
        </ul>
        <ul class="carousel_view_toggle">
            {var index = 0}
            {for item in data}
                <li id="carousel_view_toggle_${index += 1}"></li>
            {/for}
        </ul>
    {else}
        <span>__MSG__NO_FEATURED_ITEMS__</span>
    {/if}
--></div>

    <div id="carousel_video_holder" style="display:none;"><div id="carousel_video"></div></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/carousel/javascript/carousel.js"></script>
