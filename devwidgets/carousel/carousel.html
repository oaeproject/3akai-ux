<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/carousel/css/carousel.css" />
<link rel="stylesheet" type="text/css" href="/devwidgets/inbox/css/inbox.css" />

<div id="carousel_container_tl"><div id="carousel_container_tr"></div></div>
<div id="carousel_container" class="jcarousel-skin-tango"><!----></div>
<div id="carousel_container_bl"><div id="carousel_container_br"></div></div>

<div id="carousel_single_column_template" style="display:none;"><!--
    <h1>__MSG__SUGGESTED__:</h1>
    {macro tags(t)}
        {if t && t.length}
            {var tagArr = t.toString().split(',')}
            <div class="carousel_content_tags">
                <img src="/devwidgets/entity/images/entity_tags_icon.png" alt="__MSG__TAGS__:">
                {for tag in tagArr}
                    <a class="s3d-action" href="/search#tag=/tags/${tag}">${tag}</a>{if tag_index < tagArr.length -1}, {/if}
                {/for}
            </div>
        {/if}
    {/macro}

    {macro contentButtons(id, uploader)}
        <span class="carousel_bottom_buttons" style="display:none">
            <img src="/devwidgets/featuredcontent/images/featuredcontent_share_icon.png" class="carousel_sharecontent share_trigger_click" data-entityid="${id}" />
            <img src="/devwidgets/featuredcontent/images/featuredcontent_add_to_library_icon.png" class="carousel_savecontent savecontent_trigger" data-entityid="${id}" />
            <img src="/devwidgets/featuredcontent/images/featuredcontent_author_icon.png" class="personinfo_trigger_click" data-userid="${uploader}" />
        </span>
    {/macro}

    {if data.length}
        <ul>
            {for item in data}
                <li>
                    {if $.isArray(item)}
                        {for noPrev in item}
                            {if noPrev.contentType == "content"}
                                <div class="carousel_two_column_content_container">
                                    <img src="${noPrev.icon}" class="carousel_no_preview_icon"/>
                                    <div class="carousel_two_column_content_container_rh">
                                        <a href="${noPrev.url}"><h2>${noPrev.title}</h2></a>
                                        {if noPrev.description && noPrev.description.length}
                                            <div class="carousel_content_description">__MSG__SUMMARY__: ${noPrev.description}</div>
                                        {/if}
                                        {if noPrev.tags && noPrev.tags.length}
                                            <div class="carousel_content_description">__MSG__TAGS__: ${noPrev.tags.toString().replace(/,/g,", ")}</div>
                                        {/if}
                                        <div class="carousel_content_metadata">
                                            ${noPrev.mimeType} | __MSG__ADDED_ON__ ${noPrev.created} | __MSG__ADDED_BY__: <a href="/~${noPrev.createdBy}" class="s3d-regular-links s3d-bold">${noPrev.createdBy}</a>
                                            <br/>
                                            __MSG__LAST_UPDATED_BY__: <a href="/~${noPrev.lastModifiedBy}" class="s3d-regular-links s3d-bold">${noPrev.lastModifiedBy}</a>
                                        </div>
                                        {if noPrev.comments && noPrev.comments.length}
                                            <a href="#" class="carousel_content_comments s3d-regular-links">${noPrev.comments.length} __MSG__COMMENTS__</a>
                                        {/if}
                                    </div>
                                </div>
                            {elseif noPrev.contentType == "message"}
                                <div class="carousel_single_column_content_container">
                                    <div class="fl-container fl-fix inbox_items">
                                        <div class="inbox_right_div">
                                            <button type="button" class="s3d-button s3d-button-link-2-state inbox_delete_button">
                                                <span class="s3d-button-inner s3d-button-link-2-state-inner">X</span>
                                            </button>
                                        </div>
                                        <a href="/~${noPrev.from}"><img alt="person icon" src="/dev/images/user_avatar_icon_32x32.png"></a>
                                        <div class="inbox_name">
                                            <div>
                                                <a href="/~${noPrev.from}" class="s3d-regular-links s3d-bold">${noPrev.from}</a>
                                            </div>
                                            <span>__MSG__DATE__:${noPrev.date}</span>
                                        </div>
                                        <div class="inbox_subject">
                                            <span>__MSG__SUBJECT__:</span>
                                            <div>
                                                <a href="/~test" class="s3d-regular-links s3d-bold">${noPrev.subject}</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {/if}
                        {/for}
                    {else}
                        {if item.contentType == "content"}
                            <div class="carousel_single_column_content_container">
                                <div id="carousel_single_column_content_preview">${item.preview}</div>
                                <a href="${item.url}"><h2>${item.title}</h2></a>
                                {if item.description && item.description.length}
                                    <div class="carousel_content_description">__MSG__SUMMARY__: ${item.description}</div>
                                {/if}
                                {if item.tags && item.tags.length}
                                    <div class="carousel_content_description">__MSG__TAGS__: ${item.tags.toString().replace(/,/g,", ")}</div>
                                {/if}
                                <div class="carousel_content_metadata">
                                    ${item.mimeType} | __MSG__ADDED_ON__ ${item.created} | __MSG__ADDED_BY__: <a href="/~${item.createdBy}" class="s3d-regular-links s3d-bold">${item.createdBy}</a>
                                    <br/>
                                    __MSG__LAST_UPDATED_BY__: <a href="/~${item.lastModifiedBy}" class="s3d-regular-links s3d-bold">${item.lastModifiedBy}</a>
                                </div>
                                {if item.comments && item.comments.length}
                                    <a href="#" class="carousel_content_comments s3d-regular-links">${item.comments.length} __MSG__COMMENTS__</a>
                                {/if}
                            </div>
                        {elseif item.contentType == "suggestedContent"}
                            <div class="carousel_three_column_container">
                                <div class="carousel_three_column_left">
                                    {var content0 = item.suggestions[0]}
                                    {if content0}
                                        {if content0.preview}
                                            ${content0.preview}
                                        {/if}
                                        <h2>
                                            <a class="s3d-action" href="${content0.url}">
                                                ${content0.title}
                                            </a>
                                        </h2>
                                        <p>${content0.description}</p>
                                        ${tags(content0.tags)}
                                        ${contentButtons(content0.id, content0.createdBy)}
                                    {/if}
                                </div>
                                <div class="carousel_three_column_middle">
                                    {var content1 = item.suggestions[1]}
                                    {if content1}
                                        {if content1.preview}
                                            ${content1.preview}
                                        {/if}
                                        <h2>
                                            <a class="s3d-action" href="${content1.url}">
                                                ${content1.title}
                                            </a>
                                        </h2>
                                        <p>${content1.description}</p>
                                        ${tags(content1.tags)}
                                        ${contentButtons(content1.id, content1.createdBy)}
                                    {/if}
                                </div>
                                <div class="carousel_three_column_right">
                                    <div class="carousel_two_high_top">
                                        {var content2 = item.suggestions[2]}
                                        {if content2}
                                            <h2>
                                                <a class="s3d-action" href="${content2.url}">
                                                    ${content2.title}
                                                </a>
                                            </h2>
                                            ${tags(content2.tags)}
                                            ${contentButtons(content2.id, content2.createdBy)}
                                        {/if}
                                    </div>
                                    <div class="carousel_two_high_bottom">
                                        {var content3 = item.suggestions[3]}
                                        {if content3}
                                            <h2>
                                                <a class="s3d-action" href="${content3.url}">
                                                    ${content3.title}
                                                </a>
                                            </h2>
                                            ${tags(content3.tags)}
                                            ${contentButtons(content3.id, content3.createdBy)}
                                        {/if}
                                    </div>
                                </div>
                            </div>
                        {elseif item.contentType == "suggestedUsers"}
                            <div class="carousel_4x2_grid_container">
                                {for user in item.suggestions}
                                    <div>
                                        {if user.picture}
                                            <img src="/~${user.userid}/public/profile/${user.picture.name}" />
                                        {else}
                                            <img src="/dev/images/user_avatar_icon_48x48.png" />
                                        {/if}
                                        <h2><a href="/~${user.userid}" class="s3d-action">${user.displayName}</a></h2>
                                        <div class="carousel_user_counts">
                                            <a class="s3d-regular-light-links" href="/dev/user.html?id=${user.userid}#l=library" title="${user.counts.contentCount} __MSG__CONTENT_ITEMS__">${user.counts.contentCount} __MSG__CONTENT_ITEMS__</a> <span class="carousel_result_detail_separator">|</span> <a class="s3d-regular-light-links" href="/dev/user.html?id=${user.userid}#l=contacts" title="${user.counts.contactsCount} __MSG__CONTACTS__">${user.counts.contactsCount} __MSG__CONTACTS__</a> <span class="carousel_result_detail_separator">|</span> <a class="s3d-regular-light-links" href="/dev/user.html?id=${user.userid}#l=memberships" title="${user.counts.membershipsCount} __MSG__MEMBERSHIPS__">${user.counts.membershipsCount} __MSG__MEMBERSHIPS__</a>
                                        </div>
                                        ${tags(user.tags)}
                                        <span class="carousel_bottom_buttons" style="display:none">
                                            <img src="/devwidgets/featuredcontent/images/featuredcontent_add_to_library_icon.png" class="sakai_addtocontacts_overlay" sakai-entityid="${user.userid}" sakai-entityname="${user.displayName}" />
                                            <img src="/devwidgets/searchpeople/images/searchpeople_message_icon.png" class="sakai_sendmessage_overlay" sakai-entityid="${user.userid}" sakai-entityname="${user.displayName}" sakai-entitytype="user" />
                                        </span>
                                    </div>
                                {/for}
                            </div>
                        {elseif item.contentType == "group"}
                            {if item && item.members}
                                <div class="carousel_single_column_content_container">
                                    <div class="carousel_two_column_content_container carousel_content_text carousel_group_lh">
                                        <div class="carousel_two_column_content_container_lh"></div>
                                        <div class="carousel_two_column_content_container_rh">
                                            <a href="/~${item.groupid}" title="${item.title}"><h2 class="carousel_header_no_bottom_margin">${item.title}</h2></a>
                                            <div class="carousel_content_metadata">(<a href="#" class="s3d-regular-links">21</a>) __MSG__UPLOADS__ (<a href="#" class="s3d-regular-links">16</a>) __MSG__DISCUSSIONS__ (<a href="#" class="s3d-regular-links">36</a>) __MSG__PAGES__ (<a href="#" class="s3d-regular-links">7</a>) __MSG__SUBMISSIONS__</div>
                                            {if item.description && item.description.length}
                                                <div class="carousel_content_description">__MSG__SUMMARY__: ${item.description}</div>
                                            {/if}
                                            {if item.tags && item.tags.length}
                                                <div class="carousel_content_description">__MSG__TAGS__: ${item.tags.toString().replace(/,/g,", ")}</div>
                                            {/if}
                                        </div>
                                    </div>
                                    <div class="carousel_two_column_content_container carousel_group_rh">
                                        <h2>${item.members.length} __MSG__MEMBERS__</h2>
                                        {for member in item.members}
                                            <a href="/~${member["rep:userId"]}" title="__MSG__VIEW__ ${member.basic.elements.firstName.value} ${member.basic.elements.lastName.value}"><div class="carousel_user_icon"></div></a>
                                        {/for}
                                    </div>
                                </div>
                            {/if}
                        {elseif item.contentType == "user"}
                            <div class="carousel_single_column_content_container">
                                {if item.picture}
                                    <img src="/~${item.userid}/public/profile/${item.picture.name}" alt="${item.displayName}" class="carousel_user_image"/>
                                {else}
                                    <img src="/dev/images/default_profile_picture_128.png" alt="${item.displayName}" class="carousel_user_image"/>
                                {/if}
                                <a href="/~${item.userid}" title="__MSG__VIEW__ ${item.displayName}'s __MSG__PROFILE__"><h2>${item.displayName}</h2></a>
                                {if item.aboutme}
                                    <div class="carousel_content_description">__MSG__ABOUT_ME__: ${item.aboutme}</div>
                                {/if}
                                {if item.tags && item.tags.length}
                                    <div class="carousel_content_description">__MSG__TAGS__: ${item.tags.toString().replace(/,/g,", ")}</div>
                                {/if}
                            </div>
                        {else}
                            <div class="carousel_single_column_content_container">
                                {if item.picture}
                                    <img src="/~${item.userid}/public/profile/${item.picture.name}" alt="${item.displayName}" class="carousel_user_image"/>
                                {else}
                                    <img src="/dev/images/default_profile_picture_128.png" alt="${item.displayName}" class="carousel_user_image"/>
                                {/if}
                                <a href="/~${item.userid}" title="__MSG__VIEW__ ${item.displayName}'s __MSG__PROFILE__"><h2>${item.displayName}</h2></a>
                                {if item.aboutme}
                                    <div class="carousel_content_description">__MSG__ABOUT_ME__: ${item.aboutme}</div>
                                {/if}
                                {if item.tags && item.tags.length}
                                    <div class="carousel_content_description">__MSG__TAGS__: ${item.tags.toString().replace(/,/g,", ")}</div>
                                {/if}
                                <button type="button" class="s3d-link-button s3d-bold carousel_add_to_contacts" id="contacts_add_to_contacts_${item.userid}">
                                    __MSG__ADD_TO_CONTACTS__
                                </button>
                           </div>
                        {/if}
                    {/if}
                </li>
            {/for}
        </ul>
        <ul class="carousel_view_toggle">
            {var index = 0}
            {for item in data}
                <li id="carousel_view_toggle_${index += 1}"></li>
            {/for}
        </ul>
    {else}
        <span>__MSG__NO_FEATURED_ITEMS__</span>
    {/if}
--></div>

    <div id="carousel_video_holder" style="display:none;"><div id="carousel_video"></div></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/carousel/javascript/carousel.js"></script>
