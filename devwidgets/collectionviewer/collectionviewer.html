<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/devwidgets/collectionviewer/css/collectionviewer.css" />

<div class="collectionviewer_widget">
    <div id="collectionviewer_header_container">
        <div class="s3d-button s3d-header-button s3d-header-smaller-button s3d-listview-options">
            <div class="s3d-listview-grid" id="collectionviewer_grid_view">
                <div class="s3d-action-icon s3d-search-results-gridview"></div>
            </div>
            <div class="s3d-listview-list" id="collectionviewer_list_view">
                <div class="s3d-action-icon s3d-search-results-listview"></div>
            </div>
            <div class="s3d-listview-blog" id="collectionviewer_blog_view">
                <div class="s3d-action-icon s3d-search-results-blogview"></div>
            </div>
            <div class="s3d-listview-carousel" id="collectionviewer_carousel_view">
                <div class="s3d-action-icon s3d-search-results-carouselview"></div>
            </div>
        </div>

        <div id="collectionviewer_sortarea" class="s3d-margin-top-5 fl-force-right">
            <label for="collectionviewer_sortby">__MSG__SORT_BY__:</label>
            <select id="collectionviewer_sortby" name="collectionviewer_sortby">
                <option value="modified">__MSG__RECENTLY_CHANGED__</option>
                <option value="asc"> __MSG__A_Z__</option>
                <option value="desc">__MSG__Z_A__</option>
            </select>
        </div>
    </div>
    <div id="collectionviewer_carousel_container" style="display:none;"></div>
    <div id="collectionviewer_expanded_content_container" style="display:none;"></div>
    <div id="collectionviewer_grid_list_container" style="display:none;"></div>
</div>

<div id="collectionviewer_grid_or_list_template"><!--
    {macro listContent(i, sakai)}
        <li id="${i.id}" class="fl-container fl-fix s3d-search-result-content s3d-search-result{if i_index === "0"} s3d-search-result-first{/if}">
            <span class="s3d-search-result-user-functions">
                <button class="s3d-link-button s3d-action-icon s3d-actions-addtolibrary searchcontent_result_left_filler savecontent_trigger" data-entityid="${i['_path']}" title="__MSG__SAVE__{if i['sakai:pooled-content-file-name']} ${i['sakai:pooled-content-file-name']}{elseif i['_path']} ${i['_path']}{/if}"></button>
                <button class="s3d-link-button s3d-action-icon s3d-actions-author searchcontent_result_author_icon personinfo_trigger_click" data-userid="${i['sakai:pool-content-created-for']|safeOutput}" title="__MSG__VIEW_OWNER_INFO_FOR__{if i['sakai:pooled-content-file-name']} ${i['sakai:pooled-content-file-name']}{elseif i['_path']} ${i['_path']}{/if}"></button>
                <button class="s3d-link-button s3d-action-icon s3d-actions-share searchcontent_result_share_icon share_trigger_click" data-entityid="${i['_path']}" title="__MSG__SHARE__{if i['sakai:pooled-content-file-name']} ${i['sakai:pooled-content-file-name']}{elseif i['_path']} ${i['_path']}{/if}"></button>
            </span>
            <span class="s3d-search-result-anonuser"></span>
            <a href="/content#p={if i['sakai:pooled-content-file-name']}${i['_path']|safeURL}/${i['sakai:pooled-content-file-name']|safeURL}" title="${i['sakai:pooled-content-file-name']}"{else}${i['_path']|safeURL}" title="${i['_path']}"{/if}>
                {if i.thumbnail}
                    <img src="${i.thumbnail}" alt="${i.mimeTypeDescription}" />
                {elseif sakai.config.MimeTypes[i.mimeType]}
                    <img src="${sakai.config.MimeTypes[i.mimeType].URL}" alt="${i.mimeTypeDescription}" />
                {else}
                    <img src="${sakai.config.MimeTypes["other"].URL}" alt="${i.mimeTypeDescription}" />
                {/if}
            </a>
            <div class="s3d-search-result-right">
                <div>
                    <a class="s3d-bold s3d-regular-light-links" href="/content#p={if i['sakai:pooled-content-file-name']}${i['_path']|safeURL}/${i['sakai:pooled-content-file-name']}" title="${i['sakai:pooled-content-file-name']}"{else}${i['_path']|safeURL}" title="${i['_path']}"{/if}>
                        {if i['sakai:pooled-content-file-name']}
                            <span class="s3d-search-result-name">${i['sakai:pooled-content-file-name-short']|safeOutput}</span>
                            <span class="s3d-search-result-name-grid">${i['sakai:pooled-content-file-name-shorter']|safeOutput}</span>
                        {elseif i['_path']}
                            ${i['_path']}
                        {/if}
                    </a>
                    {if i.mimeTypeDescription}
                        <span class="searchcontent_result_mimetype">${i.mimeTypeDescription}</span>
                    {/if}
                </div>
                <div class="searchcontent_result_by">
                    __MSG__BY__
                    <a class="s3d-regular-light-links searchcontent_result_username" href="/~${i['sakai:pool-content-created-for']|safeURL}">
                        <span class="searchcontent_result_by_name">${i.ownerDisplayNameShort}</span>
                        <span class="searchcontent_result_by_name_grid">${i.ownerDisplayNameShorter}</span>
                    </a>
                    <span class="s3d-search-result-detail-separator"><span> | </span></span> __MSG__CHANGED__ ${jQuery.timeago(new Date(i._lastModified))}
                </div>
                {if i["sakai:description"]}
                    <span class="searchcontent_result_description">${i["sakai:description"]}</span>
                    <span class="searchcontent_result_description_grid">${i["sakai:description-shorter"]}</span>
                {/if}
                {if !$.isEmptyObject(i.tagsProcessed)}
                    <div class="searchcontent_result_tags">
                        <span class="searchcontent_result_icon searchcontent_result_tags_icon"></span>
                        <p class="searchcontent_result_tags_list">
                            {for t in i.tagsProcessed}
                                {if t_index > 0} <span class="searchcontent_result_tags_dot"> &bull;</span>{/if}
                                <a class="s3d-regular-light-links" href="/search#q=${t.tag|safeURL}" title="${t.tag|safeOutput}">
                                    <span class="s3d-search-result-tag">${t.tagShort|safeOutput}</span>
                                    <span class="s3d-search-result-tag-grid">${t.tagShorter|safeOutput}</span>
                                </a>
                            {/for}
                        </p>
                    </div>
                {/if}
                <div class="searchcontent_result_usedin">
                    {var placeCount = sakai.api.Content.getPlaceCount(i)}
                    {if placeCount > 0}
                        <span class="searchcontent_result_icon searchcontent_result_usedin_icon"></span>
                        __MSG__USED_IN__ ${placeCount} {if placeCount === 1} __MSG__PLACE__{else} __MSG__PLACES__{/if}
                    {/if}
                    {var commentCount = sakai.api.Content.getCommentCount(i)}
                    {if commentCount > 0}
                        <br/>
                        <span class="searchcontent_result_icon searchcontent_result_comments_icon"></span>
                        ${commentCount} {if commentCount === 1} __MSG__COMMENT__{else} __MSG__COMMENTS__{/if}
                    {/if}
                </div>
            </div>
        </li>
    {/macro}

    {macro listUser(i, sakai)}
        <li id="${i.id}" class="fl-container fl-fix s3d-search-result-person s3d-search-result{if i_index === "0"} s3d-search-result-first{/if}">
            <span class="s3d-search-result-user-functions">
                {if ! i.isMe && ! sakai.data.me.user.anon}
                    {if ! i.connected}
                        <button title="__MSG__REQUEST_CONNECTION_WITH__ ${i.name|safeOutput}" class="s3d-link-button s3d-actions-addtolibrary searchpeople_result_left_filler sakai_addtocontacts_overlay" sakai-entityid="${i.userid|safeOutput}" sakai-entityname="${i.name|safeOutput}" {if i.picture}sakai-entitypicture="${i.picture}"{/if}></button>
                        <div class="searchpeople_result_left_filler" id="searchpeople_result_left_filler_${i.userid|safeOutput}" style="display:none;"></div>
                        <button title="__MSG__SEND_MESSAGE_TO__ ${i.name|safeOutput}" class="s3d-link-button s3d-action-icon s3d-actions-message searchpeople_result_message_icon sakai_sendmessage_overlay" sakai-entityid="${i.userid|safeOutput}" sakai-entityname="${i.name|safeOutput}" sakai-entitytype="user"></button>
                    {elseif i.invited}
                        <button title="__MSG__ACCEPT_CONNECTION_WITH__ ${i.name|safeOutput}" class="s3d-link-button s3d-action-icon s3d-actions-addtolibrary searchpeople_result_plus searchpeople_result_left_filler link_accept_invitation" sakai-entityid="${i.userid|safeOutput}" sakai-entityname="${i.name|safeOutput}" {if i.picture}sakai-entitypicture="${i.picture}"{/if}></button>
                        <button title="__MSG__SEND_MESSAGE_TO__ ${i.name|safeOutput}" class="s3d-link-button searchpeople_result_message_icon sakai_sendmessage_overlay" sakai-entityid="${i.userid|safeOutput}" sakai-entityname="${i.name|safeOutput}" sakai-entitytype="user"></button>
                        <div class="searchpeople_result_left_filler" id="search_result_contact_${i.userid|safeOutput}" style="display:none;"><img src="/dev/images/accept.png" alt="__MSG__USER_IS_A_CONTACT__" /></div>
                    {elseif i.pending}
                        <div class="searchpeople_result_left_filler"></div>
                        <button title="__MSG__SEND_MESSAGE_TO__ ${i.name|safeOutput}" class="s3d-link-button s3d-action-icon s3d-actions-message searchpeople_result_message_icon sakai_sendmessage_overlay" sakai-entityid="${i.userid|safeOutput}" sakai-entityname="${i.name|safeOutput}" sakai-entitytype="user"></button>
                    {else}
                        <div class="searchpeople_result_left_filler"><img src="/dev/images/accept.png" alt="__MSG__USER_IS_A_CONTACT__" /></div>
                        <button title="__MSG__SEND_MESSAGE_TO__ ${i.name|safeOutput}" class="s3d-link-button s3d-action-icon s3d-actions-message searchpeople_result_message_icon sakai_sendmessage_overlay" sakai-entityid="${i.userid|safeOutput}" sakai-entityname="${i.name|safeOutput}" sakai-entitytype="user"></button>
                    {/if}
                {else}
                    <div class="searchpeople_result_left_filler"></div>
                {/if}
            </span>
            <span class="s3d-search-result-anonuser"></span>
            {if ! i.picture}
                <a href="/~${i.userid|safeURL}" class="fl-icon searchpeople_result_person_picture" title="__MSG__TO_SEE_THE_PERSON_PROFILE__"></a>
            {else}
                <a href="/~${i.userid|safeURL}" class="searchpeople_result_person_picture" title="__MSG__TO_SEE_THE_PERSON_PROFILE__">
                    <img alt="__MSG__TO_SEE_THE_PERSON_PROFILE__" src="${i.picture}" width="48px" height="48px"/>
                    {if i.pictureLarge}
                        <img alt="__MSG__TO_SEE_THE_PERSON_PROFILE__" src="${i.pictureLarge}" width="48px" height="48px" class="s3d-search-result-avatar-large"/>
                    {/if}
                </a>
            {/if}
            <div class="s3d-search-result-right">
                <a href="/~${i.userid|safeURL}" class="s3d-bold s3d-regular-light-links" title="${i.name}">
                    <span class="s3d-search-result-name">${i.nameShort}</span>
                    <span class="s3d-search-result-name-grid">${i.nameShorter}</span>
                </a>
                <div class="searchpeople_result_counts">
                    {if i.counts.contentCount > 0}
                        <a class="s3d-regular-light-links" href="/~${i.userid|safeURL}#l=library">
                            ${i.counts.contentCount || 0} {if i.counts.contentCount === 1} __MSG__CONTENT_ITEM__{else} __MSG__CONTENT_ITEMS__{/if}
                        </a>
                        {if i.counts.contactsCount > 0 || i.counts.membershipsCount > 0}
                            <span class="s3d-search-result-detail-separator"><span> | </span></span>
                        {/if}
                    {/if}
                    {if i.counts.contactsCount > 0}
                        <a class="s3d-regular-light-links" href="/~${i.userid|safeURL}#l=contacts">
                            ${i.counts.contactsCount || 0} {if i.counts.contactsCount === 1} __MSG__CONTACT_LC__{else} __MSG__CONTACTS_LC__{/if}
                        </a>
                        {if i.counts.membershipsCount > 0}
                            <span class="s3d-search-result-detail-separator"><span> | </span></span>
                        {/if}
                    {/if}
                    {if i.counts.membershipsCount > 0}
                        <a class="s3d-regular-light-links" href="/~${i.userid|safeURL}#l=memberships">
                            ${i.counts.membershipsCount || 0} {if i.counts.membershipsCount === 1} __MSG__MEMBERSHIP_LC__{else} __MSG__MEMBERSHIPS_LC__{/if}
                        </a>
                    {/if}
                </div>
                {if !$.isEmptyObject(i.tagsProcessed)}
                    <div class="searchpeople_result_tags">
                        <span class="searchpeople_result_icon searchpeople_result_tags_icon"></span>
                        <p class="searchpeople_result_tags_list">
                            {for t in i.tagsProcessed}
                                {if t_index > 0} <span class="searchpeople_result_tags_dot"> &bull;</span>{/if}
                                <a class="s3d-regular-light-links" href="/search#q=${t.tag|safeURL}" title="${t.tag|safeOutput}">
                                    <span class="s3d-search-result-tag">${t.tagShort|safeOutput}</span>
                                    <span class="s3d-search-result-tag-grid">${t.tagShorter|safeOutput}</span>
                                </a>
                            {/for}
                        </p>
                    </div>
                {/if}
            </div>
        </li>
    {/macro}

    {macro listGroup(i, sakai)}
        <li id="${i.id}" class="fl-container fl-fix searchgroups_result s3d-search-result-group s3d-search-result{if i_index === "0"} s3d-search-result-first{/if}">
            <span class="s3d-search-result-user-functions">
                <div class="{if !i.userMember && i["sakai:group-joinable"] !== "no"} s3d-action-icon s3d-actions-addtolibrary searchgroups_result_plus {/if} searchgroups_result_left_filler" data-group-joinable="${i["sakai:group-joinable"]}" data-groupid="${i['sakai:group-id']}"><img src="/dev/images/accept.png" class="searchgroups_memberimage_${i['sakai:group-id']}" {if !i.userMember}style="display:none;" {/if}></div>
                <button title="__MSG__SEND_MESSAGE_TO__ ${i['sakai:group-title']|safeOutput}" class="s3d-link-button searchgroups_result_message_icon s3d-action-icon s3d-actions-message sakai_sendmessage_overlay" sakai-entityid="${i['sakai:group-id']|safeOutput}" sakai-entityname="${i['sakai:group-title']|safeOutput}" sakai-entitytype="group"></button>
            </span>
            <span class="s3d-search-result-anonuser"></span>
            <a href="${i.homePath}" title="${i['sakai:group-title']|safeOutput}">
                <img src="${sakai.api.Groups.getProfilePicture(i)}" alt="${i['sakai:group-title']|safeOutput}">
                {if i.picPathLarge}
                    <img src="${i.picPathLarge}" alt="${i['sakai:group-title']|safeOutput}" class="s3d-search-result-avatar-large">
                {/if}
            </a>
            <div class="s3d-search-result-right">
                <div>
                    <a class="s3d-bold s3d-regular-light-links" href="${i.homePath}" title="${i["sakai:group-title"]|safeOutput}">
                        <span class="s3d-search-result-name">${i["sakai:group-title-short"]|safeOutput}</span>
                        <span class="s3d-search-result-name-grid">${i["sakai:group-title-shorter"]|safeOutput}</span>
                    </a>
                    {if i.groupType}
                        <span class="searchgroups_result_grouptype">${i.groupType.toUpperCase()}</span>
                    {/if}
                </div>
                <div class="searchgroups_result_usedin">
                    __MSG__CHANGED__ ${jQuery.timeago(new Date(i.lastModified))}
                    {var contentItemCount = i.counts.contentCount}
                    {if contentItemCount > 0}
                        <span class="s3d-search-result-detail-separator"><span> | </span></span>
                        <a class="s3d-regular-light-links" href="${i.homePath}#l=library">${contentItemCount} {if contentItemCount === 1} __MSG__CONTENT_ITEM__{else} __MSG__CONTENT_ITEMS__{/if}</a>
                    {/if}
                    {var participantCount = i.counts.membersCount}
                    {if participantCount > 0}
                        <span class="s3d-search-result-detail-separator"><span> | </span></span>
                        <a class="s3d-regular-light-links" href="${i.homePath}#l=participants">
                            <span id="searchgroups_result_participant_count_${i['sakai:group-id']|safeOutput}">${participantCount}</span> <span id="searchgroups_text_participant_${i['sakai:group-id']|safeOutput}">{if participantCount === 1}__MSG__PARTICIPANT__{else}__MSG__PARTICIPANTS__{/if}</span>
                        </a>
                    {/if}
                </div>
                {if i["sakai:group-description-short"]}
                    <div class="searchgroups_result_description">${i["sakai:group-description-short"]}</div>
                    <div class="searchgroups_result_description_grid">${i["sakai:group-description-shorter"]}</div>
                {/if}
                {if !$.isEmptyObject(i.tagsProcessed)}
                    <div class="searchgroups_result_tags">
                        <span class="searchgroups_result_icon searchgroups_result_tags_icon"></span>
                        <p class="searchgroups_result_tags_list">
                        {for t in i.tagsProcessed}
                            {if t_index > 0} <span class="searchgroups_result_tags_dot"> &bull;</span>{/if}
                            <a class="s3d-regular-light-links" href="/search#q=${t.tag|safeURL}" title="${t.tag|safeOutput}">
                                <span class="s3d-search-result-tag">${t.tagShort|safeOutput}</span>
                                <span class="s3d-search-result-tag-grid">${t.tagShorter|safeOutput}</span>
                            </a>
                        {/for}
                        </p>
                    </div>
                {/if}
            </div>
        </li>
    {/macro}

    <ul {if grid} class="s3d-search-results-grid"{/if}>
        {for i in items}
            {if i['sakai:pooled-content-file-name']}
                ${listContent(i, sakai)}
            {elseif i.userid}
                ${listUser(i, sakai)}
            {elseif i['sakai:group-id']}
                ${listGroup(i, sakai)}
            {/if}
        {/for}
    </ul>
--></div>

<div id="collectionviewer_carousel_template"><!--
    {macro fillUpList(itemsShort)}
        <li>
	        <div class="collectionviewer_carousel_no_thumbnail_container"></div>
	    </li>
	    {var itemsShort = itemsShort - 1}
	    {if itemsShort}
	        ${fillUpList(itemsShort)}
	    {/if}
    {/macro}

    {if data.length}
        <div class="collectionviewer_prev_next_container fl-force-right">
            <button id="collectionviewer_older" class="collectionviewer_controls s3d-link-button"></button>
            <button id="collectionviewer_oldest" class="collectionviewer_controls s3d-link-button"></button>
        </div>
        <div class="collectionviewer_prev_next_container fl-force-left">
            <button id="collectionviewer_newer" class="collectionviewer_controls s3d-link-button"></button>
            <button id="collectionviewer_newest" class="collectionviewer_controls s3d-link-button"></button>
        </div>
    {/if}
    <div id="collectionviewer_carousel" class="jcarousel-skin-tango s3d-bold">
        <ul>
            {for result in data}
                <li class="collectionviewer_carousel_item" data-arr-index="${result_index}" title="${result["sakai:pooled-content-file-name"]|safeOutput}">
                    {var thumbnail = sakai.api.Content.getThumbnail(result)}
                    <div class="collectionviewer_carousel_thumbnail_container">
                        {if thumbnail}
                            <img class="collectionviewer_carousel_thumbnail" src="${thumbnail}" alt="${result["_mimeType"]}" />
                        {elseif sakai.config.MimeTypes[result["_mimeType"]]}
                            <img class="collectionviewer_carousel_thumbnail" src="${sakai.config.MimeTypes[result["_mimeType"]].URL}" alt="${result["_mimeType"]}" />
                        {else}
                            <img class="collectionviewer_carousel_thumbnail" src="${sakai.config.MimeTypes["other"].URL}" alt="${result["_mimeType"]}" />
                        {/if}
                    </div>
                    <div class="arrow-down" style="display:none;"></div>
                </li>
            {/for}
            {if data.length < 12}
                {var itemsShort = 12 - data.length}
                ${fillUpList(itemsShort)}
            {/if}
        </ul>
    </div>
--></div>

<div id="collectionviewer_list_item_template"><!--
    <ul>
        <li class="s3d-search-result">

            {if data['sakai:pooled-content-file-name']}
                {var path = data["_path"] + "/" + data["sakai:pooled-content-file-name"]}
            {else}
                {var path = data["_path"]}
            {/if}

            <button class="s3d-link-button s3d-button collectionviewer_comments_button">
                <span class="collectionviewer_comments_count">${sakai.api.Content.getCommentCount(data)}</span>
                <div class="collectionviewer_comments_icon"></div>
            </button>
            <div class="collectionviewer_item_actions">
                <button type="button" class="s3d-button s3d-header-button s3d-header-smaller-button fl-force-right savecontent_trigger" data-entityid="${data["_path"]}">
                    __MSG__ADD_TO__...
                    <span class="s3d-page-header-add-to-icon"></span>
                </button>
                <button type="button" class="s3d-button s3d-header-button s3d-header-smaller-button fl-force-right share_trigger_click" data-entityname="${data['sakai:pooled-content-file-name']}" data-entityid="${data["_path"]}">
                    __MSG__SHARE__
                    <span class="s3d-page-header-add-to-icon"></span>
                </button>
                {if data["_mimeType"] !== "x-sakai/document"}
                    <a target="_blank" class="s3d-button s3d-header-button s3d-header-smaller-button fl-force-right collectionviewer_download_button" href="/p/${path|safeURL}">
                        __MSG__DOWNLOAD__<span class="entity_download_content"></span>
                    </a>
                {/if}
            </div>

            <a href="/content#p={if data['sakai:pooled-content-file-name']}${data['_path']|safeURL}/${data['sakai:pooled-content-file-name']|safeURL}" title="${data['sakai:pooled-content-file-name']}">{else}${data['_path']|safeURL}" title="${data['_path']}">{/if}
                {if sakai.config.MimeTypes[data["_mimeType"]]}
                    {var mimeTypeDescription = sakai.api.i18n.getValueForKey(sakai.config.MimeTypes[data["_mimeType"]].description)}
                {else}
                    {var mimeTypeDescription = sakai.api.i18n.getValueForKey(sakai.config.MimeTypes["other"].description)}
                {/if}
                {if data.thumbnail}
                    <img src="${data.thumbnail}" alt="${mimeTypeDescription}" />
                {elseif sakai.config.MimeTypes[data["_mimeType"]]}
                    <img src="${sakai.config.MimeTypes[data["_mimeType"]].URL}" alt="${mimeTypeDescription}" />
                {else}
                    <img src="${sakai.config.MimeTypes["other"].URL}" alt="mimeTypeDescription" />
                {/if}
            </a>
            <div class="s3d-search-result-right">
                <div>
                    <a class="s3d-bold s3d-regular-light-links collectionviewer_item_title" href="/content#p={if data['sakai:pooled-content-file-name']}${data['_path']|safeURL}/${data['sakai:pooled-content-file-name']}" title="${data['sakai:pooled-content-file-name']}"{else}${data['_path']|safeURL}" title="${data['_path']}"{/if}>{if data['sakai:pooled-content-file-name']}${data['sakai:pooled-content-file-name']}{elseif data['_path']}${data['_path']}{/if}</a>
                    {if mimeTypeDescription}
                        <span class="collectionviewer_result_mimetype">${mimeTypeDescription}</span>
                    {/if}
                </div>
                <div class="collectionviewer_result_by">
                    __MSG__BY__ <a class="s3d-regular-light-links searchcontent_result_username" href="/~${data['sakai:pool-content-created-for']|safeURL}">${data['sakai:pool-content-created-for']|safeOutput}</a> 
                    <span class="s3d-search-result-detail-separator">
                        <span> | </span>
                    </span>
                    __MSG__CHANGED__ ${jQuery.timeago(new Date(data["_lastModified"]))}
                </div>
               <div class="collectionviewer_result_usedin">
                   {var placeCount = sakai.api.Content.getPlaceCount(data)}
                   {if placeCount > 0}
                       <span class="searchcontent_result_icon searchcontent_result_usedin_icon"></span>
                       __MSG__USED_IN__ ${placeCount} {if placeCount === 1} __MSG__PLACE__{else} __MSG__PLACES__{/if}
                   {/if}
                   {var commentCount = sakai.api.Content.getCommentCount(data)}
                   {if commentCount > 0}
                       <span class="searchcontent_result_icon searchcontent_result_comments_icon"></span>
                       ${commentCount} {if commentCount === 1} __MSG__COMMENT__{else} __MSG__COMMENTS__{/if}
                   {/if}
               </div>
            </div>
            <hr class="fl-push fl-hidden"/>
        </li>
        <div class="collectionviewer_collection_item_comments" style="display:none;">
            <div id="widget_contentcomments" class="widget_inline"></div>
        </div>
        <hr class="fl-push fl-hidden"/>
        {if data.hasPreview}
            <div class="collectionviewer_collection_item_preview">
                <div id="widget_contentpreview" class="widget_inline"></div>
            </div>
        {elseif data._mimeType === "x-sakai/document"}
            <div class="collectionviewer_collection_item_preview">
                <div id="widget_pageviewer" class="widget_inline"></div>
            </div>
        {/if}
        <hr class="fl-push fl-hidden"/>
    </ul>
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/devwidgets/collectionviewer/javascript/collectionviewer.js"></script>
