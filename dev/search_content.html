<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>

        <!-- Sakai Core CSS -->
        <link rel="stylesheet" type="text/css" href="/dev/css/sakai/main.css" />

        <!-- Sakai Page CSS -->
        <link rel="stylesheet" type="text/css" href="/dev/css/sakai/sakai.search.css" />
        <link rel="stylesheet" type="text/css" href="/dev/css/sakai/sakai.search_b.css" />

    </head>

    <body id="root" class="fl-centered fl-container i18nable search-container">

        <!-- TOP BANNER -->
        <div id="top_banner"><!-- --></div>

        <!-- NAVIGATION BAR -->
        <div id="widget_topnavigation" class="widget_inline i18nable"></div>

        <!-- CONTENT -->
        <div class="fl-container-flex content content_search s3d-regular-links s3d-header">
            <div class="fl-fix fl-centered fixed-container s3d-fixed-container">
                <div class="s3d-decor-left"><!-- --></div>
                <div class="s3d-decor"><!-- --></div>

                <!-- TITLE -->
                <h1 class="title">__MSG__SEARCH_CONTENT_AND_MEDIA__</h1>

                <!-- TAB NAVIGATION -->
                <div class="s3d-primary-tabs">
                    <ul class="fl-tabs fl-tabs-right">
                        <li><a id="tab_search_all" href="/search">__MSG__ALL__</a></li>
                        <li class="fl-tabs-active search_tab_selected"><a href="../search/content#" id="tab_search_content">__MSG__CONTENT_AND_MEDIA__</a></li>
                        <li><a href="/search/groups" id="tab_search_sites">__MSG__GROUPS__</a></li>
                        <li><a href="/search/sakai2" id="tab_search_sakai2">__MSG__SAKAI2__</a></li>
                        <li><a href="/search/people" id="tab_search_people">__MSG__PEOPLE__</a></li>
                    </ul>
                </div>

                <!-- TAB CONTENT -->
                <div class="fl-centered fl-container fl-tab-content search_content_wrapper">
                    <div class="search_tab_content_top">
                        <div class="search_tab_content_top_inner"><!-- --></div>
                    </div>
                    <div class="search_content_main s3d-content">

                        <!-- SEARCH BAR -->
                        <div class="fl-left fl-container fl-fix search_bar">
                            <span class="s3d-button s3d-button-primary search_add_content_button" id="upload_content"><span class="s3d-button-inner">__MSG__ADD_NEW_CONTENT__</span></span>
                            <span id="search_form" >
                                <input type="text" maxlength="255" id="search_text" class="input" value="__MSG__ENTER_A_SEARCHTERM__" title="__MSG__ENTER_A_SEARCHTERM__" />
                                <button id="search_button" class="s3d-search-button s3d-button s3d-button-primary"><span class="s3d-button-inner"><span class="s3d-button-icon-right">__MSG__SEARCH__</span></span></button>
                                <!-- SITEs TEMPLATE -->
                                <div id="search_filter_my_sites_template" style="display:none;"><!--
                                    {for i in items}
                                        <option value="${i.location}" id="search_filter_my_sites_${i.location.substring(1)}">${i.name}</option>
                                    {/for}
                                --></div>
                            </span>
                        </div>

                        <!-- TEMPORARY SEARCH TEXT -->
                        <div id="search_result_temp" style="display:none;"><div class="search_padded_content"><b>__MSG__SEARCHING__ ...</b></div></div>

                        <div class="fl-container search_results">

                        <div class="search_results_faceted">
                            <span id="search_result_title" style="display:none;">__MSG__REFINE_YOUR_SEARCH__</span>
                            <span id="search_result_all_content" style="display:none;">__MSG__ALL_CONTENT_I_CAN_SEE__</span>
                            <span id="search_result_content_I_manage" style="display:none;">__MSG__CONTENT_I_CAN_EDIT__</span>
                            <span id="search_result_content_I_m_a_viewer_of" style="display:none;">__MSG__CONTENT_SHARED_WITH_ME__</span>
                            <!-- FACETED WIDGET -->
                            <div id="widget_faceted" class="widget_inline"></div>
                        </div>

                        <!-- SEARCH RESULTS -->
                        <div id="search_results_page1" class="search_results_container s3d-highlight_area_background search_results_container_sub">
                        <div class="s3d-highlight_area_background_tl">
                            <div class="s3d-highlight_area_background_tinner">
                            </div>
                        </div>
                            <!-- CONTENT -->
                            <div class="fl-container fl-fix search_results_part">
                                <div class="fl-left fl-container search_result_title" id="search_results_header">
                                    __MSG__FOUND__ <strong id="search_numberFound">0</strong>
                                    __MSG__RESULTS_MATCHING_YOUR_SEARCH_FOR__
                                    <span class="keyword" id="search_mysearchterm"></span> 
                                </div>
                                <div class="fl-left fl-container search_result_title" id="search_results_tag_header">
                                    <span class="keyword" id="search_mytagterm"></span> 
                                </div>

                                <div id="search_result_results_tagged_under" style="display:none;"><span style="font-weight:normal">__MSG__RESULTS_TAGGED_UNDER__</span></div>
                                <div id="search_result_results_located_in" style="display:none;"><span style="font-weight:normal">__MSG__RESULTS_LOCATED_IN__</span></div>

                                <!-- CONTAINER FOR THE RESULTS -->
                                <div id="search_results_container" class="s3d-highlight_area_background">123</div>

                            </div>

                            <div class="s3d-highlight_area_background_bl">
                                <div class="s3d-highlight_area_background_binner">
                                </div>
                            </div>

                            <!-- TEMPLATE CONTAINING THE RESULTS -->
                            <div id="search_results_template"><!--
                                {for i in items}
                                    {if i['sakai:pooled-content-file-name']}
                                    {var contentFound = true}
                                    <div class="fl-container fl-fix search_result">
                                        {if i['_mimeType']}
                                            {var mimeType = i['_mimeType']}
                                        {elseif i.file && i.file['_mimeType']}
                                            {var mimeType = i.file['_mimeType']}
                                        {elseif i['jcr:content'] && i['jcr:content']['_mimeType']}
                                            {var mimeType = i['jcr:content']['_mimeType']}
                                        {elseif i['jcr:primaryType'] === "sling:Folder"}
                                            {var mimeType = 'folder'}
                                        {/if}
                                        <a href="/content#p={if i['sakai:pooled-content-file-name']}${i['_path']}/${i['sakai:pooled-content-file-name']}" title="${i['sakai:pooled-content-file-name']}"{else}${i['_path']}" title="${i['_path']}"{/if}>
                                        {if (mimeType=="image/jpg" || mimeType=="image/png" || mimeType=="image/gif") && sakai.config.MimeTypes[mimeType]}
                                            {var mimeTypeDescription = sakai.api.i18n.General.getValueForKey(sakai.config.MimeTypes[mimeType].description)}
                                            <img src="/p/${i['_path']}" alt="${mimeTypeDescription}" />
                                        {elseif sakai.config.MimeTypes[mimeType]}
                                            {var mimeTypeDescription = sakai.api.i18n.General.getValueForKey(sakai.config.MimeTypes[mimeType].description)}
                                            <img src="${sakai.config.MimeTypes[mimeType].URL}" alt="${mimeTypeDescription}" />
                                        {else}
                                            {var mimeTypeDescription = sakai.api.i18n.General.getValueForKey(sakai.config.MimeTypes["other"].description)}
                                            <img src="${sakai.config.MimeTypes["other"].URL}" alt="${mimeTypeDescription}" />
                                        {/if}
                                        </a>
                                        <div class="search_result_right">
                                            <div class="s3d-bold">
                                                <a href="/content#p={if i['sakai:pooled-content-file-name']${i['_path']}/${i['sakai:pooled-content-file-name']}" title="${i['sakai:pooled-content-file-name']}"{else}${i['_path']}" title="${i['_path']}"{/if}>
                                                    {if i['sakai:pooled-content-file-name']}
                                                        ${i['sakai:pooled-content-file-name']}
                                                    {elseif i['_path']}
                                                        ${i['_path']}
                                                    {/if}
                                                </a>
                                            </div>
                                            {if i["sakai:description"]}<div class="search_result_description">${i["sakai:description"]}</div>{/if}
                                            {if i["sakai:tags"] && i["sakai:tags"].length > 0}
                                                <div class="search_result_tags">__MSG__TAGS__:
                                                    {for t in i["sakai:tags"]}{if t.split("/")[0] !== "directory"}{if t_index > 0},{/if} ${t}{/if}{/for}
                                                </div>
                                            {/if}
                                            {if mimeTypeDescription}<div class="search_result_type s3d-content-type-link"><a href="/content#p={if i['sakai:pooled-content-file-name']}${i['_path']}/${i['sakai:pooled-content-file-name']}{else}${i['_path']}{/if}">${mimeTypeDescription}</a></div>{/if}
                                        </div>
                                    </div>
                                    {/if}
                                {/for}
                                {if !contentFound}
                                    <div class="search_padded_content">__MSG__NO_CONTENT_AND_MEDIA_FOUND__</div>
                                {/if}
                            --></div>
                        </div>
                        </div>
                    </div>

                    <div class="s3d-no-options">
                        <div class="s3d-no-options-inner"><!-- --></div>
                    </div>
                </div>

                <!-- CONTAINER FOR THE PAGER -->
                <div class="jq_pager"><!-- --></div>
            </div>
        </div>
        
        <!-- Upload Content Widget Container -->
        <div id="widget_fileupload" class="widget_inline"></div>

        <!-- FOOTER WIDGET -->
        <div id="widget_footer" class="widget_inline footercontainer"></div>

        <!-- CHAT -->
        <div id="widget_chat" class="widget_inline"></div>

        <!-- Dependency JS -->
        <script data-main="/dev/lib/sakai/sakai.dependencies.js" src="/dev/lib/jquery/require.js"></script>

        <script>require(["/dev/javascript/history/search_history.js", "/dev/javascript/search_main.js", "/dev/javascript/search_content.js"]);</script>
    </body>
</html>
