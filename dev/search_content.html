<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Sakai 3 R&amp;D - __MSG__SEARCH_CONTENT_AND_MEDIA__</title>

        <!-- Sakai Core CSS -->
        <link rel="stylesheet" type="text/css" href="_css/FSS/fss-base.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.base.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.core.2.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.3.css" />

        <!-- Sakai Page CSS -->
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.search.css" />
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.search_b.css" />

        <!-- 3rd party CSS -->
        <link rel="stylesheet" type="text/css" href="_css/sakai/sakai.components.jq_pager.css" />
        <link rel="stylesheet" type="text/css" href="/dev/_css/lib/jquery.autoSuggest.css" />


        <!-- Sakai Config JS -->
        <script type="text/javascript" src="_configuration/widgets.js"></script>
        <script type="text/javascript" src="/var/widgets.json?callback=sakai.storeWidgets"></script>
        <script type="text/javascript" src="_configuration/config.js"></script>

        <!-- Core 3rd-party JS -->
        <script type="text/javascript" src="_lib/jquery/jquery.js"></script>
        <script type="text/javascript" src="_lib/jquery/jquery-ui.full.js"></script>
        <script type="text/javascript" src="_lib/Fluid/3akai_Infusion.js"></script>
        <script type="text/javascript" src="_lib/jquery/plugins/jquery.json.js"></script>
        <script type="text/javascript" src="/dev/_lib/google/html-sanitizer-minified.js"></script>

        <!-- Sakai Core JS -->
        <script type="text/javascript" src="_lib/sakai_util/sakai_magic.js"></script>
        <script type="text/javascript" src="_lib/sakai_util/i18n.js"></script>
        <script type="text/javascript" src="_lib/sakai_util/site_authz.js"></script>

        <!-- 3rd party JS -->
        <script type="text/javascript" src="/dev/_lib/sakai_util/trimpath.template.js"></script>
        <script type="text/javascript" src="/dev/_lib/sakai_util/querystring.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jqmodal.sakai-edited.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jquery.cookie.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jquery.pager.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jquery.ba-bbq.js"></script>
        <script type="text/javascript" src="_javascript/_history/search_history.js"></script>
        <script type="text/javascript" src="/dev/_lib/jquery/plugins/jquery.autoSuggest.sakai-edited.js"></script>

    </head>

    <body id="root" class="fl-centered fl-container i18nable search-container">

        <!-- NAVIGATION BAR -->
        <div id="widget_topnavigation" class="widget_inline i18nable"></div>

        <!-- CONTENT -->
        <div class="fl-container-flex content content_search">
            <div class="fl-fix fl-centered fixed-container">
                <div class="decor"><!-- --></div>

                <!-- TITLE -->
                <h1 class="title">__MSG__SEARCH_CONTENT_AND_MEDIA__</h1>

                <!-- TAB NAVIGATION -->
                <div class="s3d-primary-tabs">
                    <ul class="fl-tabs fl-tabs-right">
                        <li><a id="tab_search_all" href="search.html#">__MSG__ALL__</a></li>
                        <li class="fl-tabs-active search_tab_selected"><a href="search_content.html#" id="tab_search_content">__MSG__CONTENT_AND_MEDIA__</a></li>
                        <li><a href="search_groups.html#" id="tab_search_sites">__MSG__GROUPS__</a></li>
                        <li><a href="search_people.html#" id="tab_search_people">__MSG__PEOPLE__</a></li>
                    </ul>
                </div>

                <!-- TAB CONTENT -->
                <div class="fl-centered fl-container fl-tab-content search_content_wrapper">
                    <div class="search_tab_content_top">
                        <div class="search_tab_content_top_inner"><!-- --></div>
                    </div>
                    <div class="search_content_main">

                        <!-- SEARCH BAR -->
                        <div class="fl-left fl-container fl-fix search_bar">
                            <div id="search_form" >
                                <input type="text" maxlength="255" id="search_text" class="input" value="__MSG__ENTER_A_SEARCHTERM__" title="__MSG__ENTER_A_SEARCHTERM__" />
                                <button id="search_button" class="s3d-search-button s3d-button s3d-button-primary"><span class="s3d-button-inner"><span class="s3d-button-icon-right">__MSG__SEARCH__</span></span></button>
                                <!-- SITEs TEMPLATE -->
                                <div id="search_filter_my_sites_template" style="display:none;"><!--
                                    {for i in items}
                                        <option value="${i.location}" id="search_filter_my_sites_${i.location.substring(1)}">${i.name}</option>
                                    {/for}
                                --></div>
                            </div>
                        </div>

                        <!-- TEMPORARY SEARCH TEXT -->
                        <div id="search_result_temp" style="display:none;"><div class="search_padded_content"><b>__MSG__SEARCHING__ ...</b></div></div>

                        <div class="fl-container fl-fix search_results">

                        <div class="search_results_faceted">
                            <!-- FACETED WIDGET -->
                            <div id="widget_faceted" class="widget_inline"></div>
                        </div>

                        <!-- SEARCH RESULTS -->
                        <div id="search_results_page1" class="search_results_container search_results_container_sub">

                            <div class="search_top_rounded"><div class="search_top_rounded_inner"><!-- --></div></div>

                            <!-- CONTENT -->
                            <div class="fl-container fl-fix search_results_part">
                                
                                <div class="fl-left fl-container search_result_title" id="search_results_header">
                                    __MSG__FOUND__ <strong id="search_numberFound">0</strong>
                                    __MSG__RESULTS_MATCHING_YOUR_SEARCH_FOR__
                                    <span class="keyword" id="search_mysearchterm"></span> 
                                </div>
                                <div class="fl-left fl-container search_result_title" id="search_results_tag_header">
                                    __MSG__RESULTS_TAGGED_UNDER__
                                    <span class="keyword" id="search_mytagterm"></span> 
                                </div>

                                <!-- CONTAINER FOR THE RESULTS -->
                                <div id="search_results_container"></div>
                            </div>

                            <!-- TEMPLATE CONTAINING THE RESULTS -->
                            <div id="search_results_template"><!--
                                {for i in items}
                                    {if i['sakai:pooled-content-file-name']}
                                    {var contentFound = true}
                                    <div class="fl-container fl-fix search_result">
                                        {if i['jcr:mimeType']}
                                            {var mimeType = i['jcr:mimeType']}
                                        {elseif i.file && i.file['jcr:mimeType']}
                                            {var mimeType = i.file['jcr:mimeType']}
                                        {elseif i['jcr:content'] && i['jcr:content']['jcr:mimeType']}
                                            {var mimeType = i['jcr:content']['jcr:mimeType']}
                                        {elseif i['jcr:primaryType'] === "sling:Folder"}
                                            {var mimeType = 'folder'}
                                        {/if}
                                        {if mimeType=="image/jpg" || mimeType=="image/png" || mimeType=="image/gif" || mimeType=="image/bmp"}
                                            {var mimeTypeDescription = sakai.config.MimeTypes[mimeType].description}
                                            {if i['jcr:primaryType'] && i['jcr:primaryType'] === "sakai:pooled-content"}
                                                <img src="/p/${i['jcr:name']}" alt="${mimeTypeDescription}" />
                                            {else}
                                                <img src="${i['jcr:path']}" alt="${mimeTypeDescription}" />
                                            {/if}
                                        {elseif sakai.config.MimeTypes[mimeType]}
                                            {var mimeTypeDescription = sakai.config.MimeTypes[mimeType].description}
                                            <img src="${sakai.config.MimeTypes[mimeType].URL}" alt="${mimeTypeDescription}" />
                                        {else}
                                            {var mimeTypeDescription = sakai.config.MimeTypes["other"].description}
                                            <img src="${sakai.config.MimeTypes["other"].URL}" alt="${mimeTypeDescription}" />
                                        {/if}
                                        <div class="search_result_right">
                                            <div class="search_result_header">
                                                <a href="/dev/content_profile.html#content_path={if i['sakai:pooled-content-file-name']}/p/${i['jcr:name']}" title="${i['sakai:pooled-content-file-name']}"{else}${i['jcr:path']}" title="${i['jcr:name']}"{/if}>
                                                    {if i['sakai:pooled-content-file-name']}
                                                        {if i['sakai:pooled-content-file-name'].length > 60}
                                                            ${i['sakai:pooled-content-file-name'].substring(0, 60)}...
                                                        {else}
                                                            ${i['sakai:pooled-content-file-name']}
                                                        {/if}
                                                    {elseif i['jcr:name']}
                                                        {if i['jcr:name'].length > 60}
                                                            ${i['jcr:name'].substring(0, 60)}...
                                                        {else}
                                                            ${i['jcr:name']}
                                                        {/if}
                                                    {/if}
                                                </a>
                                            </div>
                                            {if i["sakai:description"]}<div class="search_result_description">${i["sakai:description"]}</div>{/if}
                                            {if i["sakai:tags"] && i["sakai:tags"].length > 0}
                                                <div class="search_result_tags">__MSG__TAGS__:
                                                    {for t in i["sakai:tags"]}{if t_index > 0},{/if} ${t}{/for}
                                                </div>
                                            {/if}
                                            {if mimeTypeDescription}<div class="search_result_type"><a href="/dev/content_profile.html#content_path={if i['sakai:pooled-content-file-name']}/p/${i['jcr:name']}{else}${i['jcr:path']}{/if}">${mimeTypeDescription}</a></div>{/if}
                                        </div>
                                    </div>
                                    {/if}
                                {/for}
                                {if !contentFound}
                                    <div class="search_padded_content">__MSG__NO_CONTENT_AND_MEDIA_FOUND__</div>
                                {/if}
                            --></div>

                            <div class="search_bottom_rounded"><div class="search_bottom_rounded_inner"><!-- --></div></div>
                        </div>
                        </div>
                    </div>

                    <div class="search_tab_content_bottom">
                        <div class="search_tab_content_bottom_inner"><!-- --></div>
                    </div>
                </div>

                <!-- CONTAINER FOR THE PAGER -->
                <div class="jq_pager"><!-- --></div>
            </div>
        </div>

        <!-- FOOTER WIDGET -->
        <div id="widget_footer" class="widget_inline footercontainer"></div>

        <!-- CHAT -->
        <div id="widget_chat" class="widget_inline"></div>

        <script type="text/javascript" src="_javascript/search_main.js"></script>
        <script type="text/javascript" src="_javascript/search_content.js"></script>

    </body>

</html>
